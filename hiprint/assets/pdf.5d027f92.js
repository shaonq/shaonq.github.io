var Xt=Object.defineProperty;var Yt=(et,A,G)=>A in et?Xt(et,A,{enumerable:!0,configurable:!0,writable:!0,value:G}):et[A]=G;var jt=(et,A,G)=>(Yt(et,typeof A!="symbol"?A+"":A,G),G),Gt=(et,A,G)=>{if(!A.has(et))throw TypeError("Cannot "+G)};var pt=(et,A,G)=>(Gt(et,A,"read from private field"),G?G.call(et):A.get(et)),Pt=(et,A,G)=>{if(A.has(et))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(et):A.set(et,G)},Et=(et,A,G,o)=>(Gt(et,A,"write to private field"),o?o.call(et,G):A.set(et,G),G);var Dt=(et,A,G)=>(Gt(et,A,"access private method"),G);import"./shaonq-vue.7644992f.js";/* empty css              */import{A as commonjsGlobal,d as defineComponent,j as ref,w as watch,o as onMounted,L as openBlock,M as createElementBlock,n as nextTick,bl as Card,S as createVNode,O as withCtx,u as unref}from"./arco.d8569e76.js";import{c as commonjsRequire,r as require$$5}from"./shaonq-mind.0a933d08.js";import"./vue.3094a546.js";import"./vxe.914a28ef.js";import"./bwip.e00d1624.js";var pdf={exports:{}};(function(module,exports){(function(A,G){module.exports=G()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.VerbosityLevel=A.Util=A.UnknownErrorException=A.UnexpectedResponseException=A.UNSUPPORTED_FEATURES=A.TextRenderingMode=A.StreamType=A.RenderingIntentFlag=A.PermissionFlag=A.PasswordResponses=A.PasswordException=A.PageActionEventType=A.OPS=A.MissingPDFException=A.IsLittleEndianCached=A.IsEvalSupportedCached=A.InvalidPDFException=A.ImageKind=A.IDENTITY_MATRIX=A.FormatError=A.FontType=A.FONT_IDENTITY_MATRIX=A.DocumentActionEventType=A.CMapCompressionType=A.BaseException=A.AnnotationType=A.AnnotationStateModelType=A.AnnotationReviewState=A.AnnotationReplyType=A.AnnotationMode=A.AnnotationMarkedState=A.AnnotationFlag=A.AnnotationFieldFlag=A.AnnotationBorderStyleType=A.AnnotationActionEventType=A.AbortException=void 0,A.arrayByteLength=q,A.arraysToBytes=X,A.assert=m,A.bytesToString=O,A.createPromiseCapability=$t,A.createValidAbsoluteUrl=h,A.escapeString=_t,A.getModificationDate=zt,A.getVerbosityLevel=W,A.info=z,A.isArrayBuffer=Tt,A.isArrayEqual=Ut,A.isAscii=vt,A.isSameOrigin=i,A.objectFromMap=tt,A.objectSize=nt,A.setVerbosityLevel=V,A.shadow=b,A.string32=J,A.stringToBytes=N,A.stringToPDFString=Ct,A.stringToUTF16BEString=At,A.stringToUTF8String=St,A.unreachable=K,A.utf8StringToString=ft,A.warn=Q,G(2);const o=[1,0,0,1,0,0];A.IDENTITY_MATRIX=o;const Z=[.001,0,0,.001,0,0];A.FONT_IDENTITY_MATRIX=Z;const H={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};A.RenderingIntentFlag=H;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};A.AnnotationMode=$;const U={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};A.PermissionFlag=U;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};A.TextRenderingMode=P;const e={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};A.ImageKind=e;const l={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};A.AnnotationType=l;const r={MARKED:"Marked",REVIEW:"Review"};A.AnnotationStateModelType=r;const f={MARKED:"Marked",UNMARKED:"Unmarked"};A.AnnotationMarkedState=f;const u={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};A.AnnotationReviewState=u;const E={GROUP:"Group",REPLY:"R"};A.AnnotationReplyType=E;const T={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};A.AnnotationFlag=T;const p={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};A.AnnotationFieldFlag=p;const j={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};A.AnnotationBorderStyleType=j;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};A.AnnotationActionEventType=L;const R={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};A.DocumentActionEventType=R;const x={O:"PageOpen",C:"PageClose"};A.PageActionEventType=x;const s={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};A.StreamType=s;const a={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};A.FontType=a;const C={ERRORS:0,WARNINGS:1,INFOS:5};A.VerbosityLevel=C;const k={NONE:0,BINARY:1,STREAM:2};A.CMapCompressionType=k;const y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};A.OPS=y;const M={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};A.UNSUPPORTED_FEATURES=M;const w={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};A.PasswordResponses=w;let D=C.WARNINGS;function V(Y){Number.isInteger(Y)&&(D=Y)}function W(){return D}function z(Y){D>=C.INFOS&&console.log(`Info: ${Y}`)}function Q(Y){D>=C.WARNINGS&&console.log(`Warning: ${Y}`)}function K(Y){throw new Error(Y)}function m(Y,I){Y||K(I)}function i(Y,I){let B;try{if(B=new URL(Y),!B.origin||B.origin==="null")return!1}catch{return!1}const rt=new URL(I,B);return B.origin===rt.origin}function n(Y){if(!Y)return!1;switch(Y.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h(Y,I=null,B=null){if(!Y)return null;try{if(B&&typeof Y=="string"){if(B.addDefaultProtocol&&Y.startsWith("www.")){const at=Y.match(/\./g);at&&at.length>=2&&(Y=`http://${Y}`)}if(B.tryConvertEncoding)try{Y=St(Y)}catch{}}const rt=I?new URL(Y,I):new URL(Y);if(n(rt))return rt}catch{}return null}function b(Y,I,B){return Object.defineProperty(Y,I,{value:B,enumerable:!0,configurable:!0,writable:!1}),B}const S=function(){function I(B,rt){this.constructor===I&&K("Cannot initialize BaseException."),this.message=B,this.name=rt}return I.prototype=new Error,I.constructor=I,I}();A.BaseException=S;class v extends S{constructor(I,B){super(I,"PasswordException"),this.code=B}}A.PasswordException=v;class t extends S{constructor(I,B){super(I,"UnknownErrorException"),this.details=B}}A.UnknownErrorException=t;class d extends S{constructor(I){super(I,"InvalidPDFException")}}A.InvalidPDFException=d;class g extends S{constructor(I){super(I,"MissingPDFException")}}A.MissingPDFException=g;class _ extends S{constructor(I,B){super(I,"UnexpectedResponseException"),this.status=B}}A.UnexpectedResponseException=_;class c extends S{constructor(I){super(I,"FormatError")}}A.FormatError=c;class F extends S{constructor(I){super(I,"AbortException")}}A.AbortException=F;function O(Y){(typeof Y!="object"||Y===null||Y.length===void 0)&&K("Invalid argument for bytesToString");const I=Y.length,B=8192;if(I<B)return String.fromCharCode.apply(null,Y);const rt=[];for(let at=0;at<I;at+=B){const ht=Math.min(at+B,I),dt=Y.subarray(at,ht);rt.push(String.fromCharCode.apply(null,dt))}return rt.join("")}function N(Y){typeof Y!="string"&&K("Invalid argument for stringToBytes");const I=Y.length,B=new Uint8Array(I);for(let rt=0;rt<I;++rt)B[rt]=Y.charCodeAt(rt)&255;return B}function q(Y){if(Y.length!==void 0)return Y.length;if(Y.byteLength!==void 0)return Y.byteLength;K("Invalid argument for arrayByteLength")}function X(Y){const I=Y.length;if(I===1&&Y[0]instanceof Uint8Array)return Y[0];let B=0;for(let ht=0;ht<I;ht++)B+=q(Y[ht]);let rt=0;const at=new Uint8Array(B);for(let ht=0;ht<I;ht++){let dt=Y[ht];dt instanceof Uint8Array||(typeof dt=="string"?dt=N(dt):dt=new Uint8Array(dt));const xt=dt.byteLength;at.set(dt,rt),rt+=xt}return at}function J(Y){return String.fromCharCode(Y>>24&255,Y>>16&255,Y>>8&255,Y&255)}function nt(Y){return Object.keys(Y).length}function tt(Y){const I=Object.create(null);for(const[B,rt]of Y)I[B]=rt;return I}function st(){const Y=new Uint8Array(4);return Y[0]=1,new Uint32Array(Y.buffer,0,1)[0]===1}const lt={get value(){return b(this,"value",st())}};A.IsLittleEndianCached=lt;function it(){try{return new Function(""),!0}catch{return!1}}const ot={get value(){return b(this,"value",it())}};A.IsEvalSupportedCached=ot;const ct=[...Array(256).keys()].map(Y=>Y.toString(16).padStart(2,"0"));class ut{static makeHexColor(I,B,rt){return`#${ct[I]}${ct[B]}${ct[rt]}`}static transform(I,B){return[I[0]*B[0]+I[2]*B[1],I[1]*B[0]+I[3]*B[1],I[0]*B[2]+I[2]*B[3],I[1]*B[2]+I[3]*B[3],I[0]*B[4]+I[2]*B[5]+I[4],I[1]*B[4]+I[3]*B[5]+I[5]]}static applyTransform(I,B){const rt=I[0]*B[0]+I[1]*B[2]+B[4],at=I[0]*B[1]+I[1]*B[3]+B[5];return[rt,at]}static applyInverseTransform(I,B){const rt=B[0]*B[3]-B[1]*B[2],at=(I[0]*B[3]-I[1]*B[2]+B[2]*B[5]-B[4]*B[3])/rt,ht=(-I[0]*B[1]+I[1]*B[0]+B[4]*B[1]-B[5]*B[0])/rt;return[at,ht]}static getAxialAlignedBoundingBox(I,B){const rt=ut.applyTransform(I,B),at=ut.applyTransform(I.slice(2,4),B),ht=ut.applyTransform([I[0],I[3]],B),dt=ut.applyTransform([I[2],I[1]],B);return[Math.min(rt[0],at[0],ht[0],dt[0]),Math.min(rt[1],at[1],ht[1],dt[1]),Math.max(rt[0],at[0],ht[0],dt[0]),Math.max(rt[1],at[1],ht[1],dt[1])]}static inverseTransform(I){const B=I[0]*I[3]-I[1]*I[2];return[I[3]/B,-I[1]/B,-I[2]/B,I[0]/B,(I[2]*I[5]-I[4]*I[3])/B,(I[4]*I[1]-I[5]*I[0])/B]}static apply3dTransform(I,B){return[I[0]*B[0]+I[1]*B[1]+I[2]*B[2],I[3]*B[0]+I[4]*B[1]+I[5]*B[2],I[6]*B[0]+I[7]*B[1]+I[8]*B[2]]}static singularValueDecompose2dScale(I){const B=[I[0],I[2],I[1],I[3]],rt=I[0]*B[0]+I[1]*B[2],at=I[0]*B[1]+I[1]*B[3],ht=I[2]*B[0]+I[3]*B[2],dt=I[2]*B[1]+I[3]*B[3],xt=(rt+dt)/2,wt=Math.sqrt((rt+dt)**2-4*(rt*dt-ht*at))/2,Ft=xt+wt||1,bt=xt-wt||1;return[Math.sqrt(Ft),Math.sqrt(bt)]}static normalizeRect(I){const B=I.slice(0);return I[0]>I[2]&&(B[0]=I[2],B[2]=I[0]),I[1]>I[3]&&(B[1]=I[3],B[3]=I[1]),B}static intersect(I,B){function rt(xt,wt){return xt-wt}const at=[I[0],I[2],B[0],B[2]].sort(rt),ht=[I[1],I[3],B[1],B[3]].sort(rt),dt=[];if(I=ut.normalizeRect(I),B=ut.normalizeRect(B),at[0]===I[0]&&at[1]===B[0]||at[0]===B[0]&&at[1]===I[0])dt[0]=at[1],dt[2]=at[2];else return null;if(ht[0]===I[1]&&ht[1]===B[1]||ht[0]===B[1]&&ht[1]===I[1])dt[1]=ht[1],dt[3]=ht[2];else return null;return dt}static bezierBoundingBox(I,B,rt,at,ht,dt,xt,wt){const Ft=[],bt=[[],[]];let Rt,kt,Lt,gt,It,Nt,Bt,Wt;for(let qt=0;qt<2;++qt){if(qt===0?(kt=6*I-12*rt+6*ht,Rt=-3*I+9*rt-9*ht+3*xt,Lt=3*rt-3*I):(kt=6*B-12*at+6*dt,Rt=-3*B+9*at-9*dt+3*wt,Lt=3*at-3*B),Math.abs(Rt)<1e-12){if(Math.abs(kt)<1e-12)continue;gt=-Lt/kt,0<gt&&gt<1&&Ft.push(gt);continue}Bt=kt*kt-4*Lt*Rt,Wt=Math.sqrt(Bt),!(Bt<0)&&(It=(-kt+Wt)/(2*Rt),0<It&&It<1&&Ft.push(It),Nt=(-kt-Wt)/(2*Rt),0<Nt&&Nt<1&&Ft.push(Nt))}let Mt=Ft.length,yt;const Ot=Mt;for(;Mt--;)gt=Ft[Mt],yt=1-gt,bt[0][Mt]=yt*yt*yt*I+3*yt*yt*gt*rt+3*yt*gt*gt*ht+gt*gt*gt*xt,bt[1][Mt]=yt*yt*yt*B+3*yt*yt*gt*at+3*yt*gt*gt*dt+gt*gt*gt*wt;return bt[0][Ot]=I,bt[1][Ot]=B,bt[0][Ot+1]=xt,bt[1][Ot+1]=wt,bt[0].length=bt[1].length=Ot+2,[Math.min(...bt[0]),Math.min(...bt[1]),Math.max(...bt[0]),Math.max(...bt[1])]}}A.Util=ut;const mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ct(Y){if(Y[0]>="\xEF"){let B;if(Y[0]==="\xFE"&&Y[1]==="\xFF"?B="utf-16be":Y[0]==="\xFF"&&Y[1]==="\xFE"?B="utf-16le":Y[0]==="\xEF"&&Y[1]==="\xBB"&&Y[2]==="\xBF"&&(B="utf-8"),B)try{const rt=new TextDecoder(B,{fatal:!0}),at=N(Y);return rt.decode(at)}catch(rt){Q(`stringToPDFString: "${rt}".`)}}const I=[];for(let B=0,rt=Y.length;B<rt;B++){const at=mt[Y.charCodeAt(B)];I.push(at?String.fromCharCode(at):Y.charAt(B))}return I.join("")}function _t(Y){return Y.replace(/([()\\\n\r])/g,I=>I===`
`?"\\n":I==="\r"?"\\r":`\\${I}`)}function vt(Y){return/^[\x00-\x7F]*$/.test(Y)}function At(Y){const I=["\xFE\xFF"];for(let B=0,rt=Y.length;B<rt;B++){const at=Y.charCodeAt(B);I.push(String.fromCharCode(at>>8&255),String.fromCharCode(at&255))}return I.join("")}function St(Y){return decodeURIComponent(escape(Y))}function ft(Y){return unescape(encodeURIComponent(Y))}function Tt(Y){return typeof Y=="object"&&Y!==null&&Y.byteLength!==void 0}function Ut(Y,I){if(Y.length!==I.length)return!1;for(let B=0,rt=Y.length;B<rt;B++)if(Y[B]!==I[B])return!1;return!0}function zt(Y=new Date){return[Y.getUTCFullYear().toString(),(Y.getUTCMonth()+1).toString().padStart(2,"0"),Y.getUTCDate().toString().padStart(2,"0"),Y.getUTCHours().toString().padStart(2,"0"),Y.getUTCMinutes().toString().padStart(2,"0"),Y.getUTCSeconds().toString().padStart(2,"0")].join("")}function $t(){const Y=Object.create(null);let I=!1;return Object.defineProperty(Y,"settled",{get(){return I}}),Y.promise=new Promise(function(B,rt){Y.resolve=function(at){I=!0,B(at)},Y.reject=function(at){I=!0,rt(at)}}),Y}},(et,A,G)=>{G(3)},(et,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.isNodeJS=void 0;const G=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");A.isNodeJS=G},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var et,A,G,o,Z,H,$,Ht;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(P){createPDFNetworkStream=P}function getDocument(P){const e=new PDFDocumentLoadingTask;let l;if(typeof P=="string"||P instanceof URL)l={url:P};else if((0,_util.isArrayBuffer)(P))l={data:P};else if(P instanceof PDFDataRangeTransport)l={range:P};else{if(typeof P!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!P.url&&!P.data&&!P.range)throw new Error("Invalid parameter object: need either .data, .range or .url");l=P}const r=Object.create(null);let f=null,u=null;for(const T in l){const p=l[T];switch(T){case"url":if(typeof window<"u")try{r[T]=new URL(p,window.location).href;continue}catch(j){(0,_util.warn)(`Cannot create valid URL: "${j}".`)}else if(typeof p=="string"||p instanceof URL){r[T]=p.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":f=p;continue;case"worker":u=p;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&p instanceof Buffer)r[T]=new Uint8Array(p);else{if(p instanceof Uint8Array)break;if(typeof p=="string")r[T]=(0,_util.stringToBytes)(p);else if(typeof p=="object"&&p!==null&&!isNaN(p.length))r[T]=new Uint8Array(p);else if((0,_util.isArrayBuffer)(p))r[T]=new Uint8Array(p);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}r[T]=p}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),typeof r.ownerDocument>"u"&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!u){const T={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};u=T.port?_PDFWorker.fromPort(T):new _PDFWorker(T),e._worker=u}const E=e.docId;return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const T=_fetchDocument(u,r,f,E),p=new Promise(function(j){let L;f?L=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},f):r.data||(L=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),j(L)});return Promise.all([T,p]).then(function([j,L]){if(e.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(E,j,u.port),x=new WorkerTransport(R,e,L,r);e._transport=x,R.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(P,e,l,r){if(P.destroyed)throw new Error("Worker was destroyed");l&&(e.length=l.length,e.initialData=l.initialData,e.progressiveDone=l.progressiveDone,e.contentDispositionFilename=l.contentDispositionFilename);const f=await P.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.13.216",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(P.destroyed)throw new Error("Worker was destroyed");return f}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,l,r=!1,f=null){this.length=e,this.initialData=l,this.progressiveDone=r,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,l){for(const r of this._rangeListeners)r(e,l)}onDataProgress(e,l){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,l)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const l of this._progressiveReadListeners)l(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,l){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,l){this._pdfInfo=e,this._transport=l,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,l,r,f,u=!1){this._pageIndex=e,this._pageInfo=l,this._ownerDocument=f,this._transport=r,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:l=this.rotate,offsetX:r=0,offsetY:f=0,dontFlip:u=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:l,offsetX:r,offsetY:f,dontFlip:u})}getAnnotations({intent:e="display"}={}){const l=this._transport.getRenderingIntent(e);let r=this._annotationPromises.get(l.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,l.renderingIntent),this._annotationPromises.set(l.cacheKey,r),r=r.then(f=>{for(const u of f)u.titleObj!==void 0&&Object.defineProperty(u,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),u.titleObj.str}}),u.contentsObj!==void 0&&Object.defineProperty(u,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),u.contentsObj.str}});return f})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:l,intent:r="display",annotationMode:f=_util.AnnotationMode.ENABLE,transform:u=null,imageLayer:E=null,canvasFactory:T=null,background:p=null,optionalContentConfigPromise:j=null,annotationCanvasMap:L=null}){var M,w;((M=arguments[0])==null?void 0:M.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&f===_util.AnnotationMode.ENABLE&&(f=_util.AnnotationMode.ENABLE_FORMS)),((w=arguments[0])==null?void 0:w.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&f===_util.AnnotationMode.ENABLE&&(f=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const R=this._transport.getRenderingIntent(r,f);this.pendingCleanup=!1,j||(j=this._transport.getOptionalContentConfig());let x=this._intentStates.get(R.cacheKey);x||(x=Object.create(null),this._intentStates.set(R.cacheKey,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const s=T||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),a=!!(R.renderingIntent&_util.RenderingIntentFlag.PRINT);x.displayReadyCapability||(x.displayReadyCapability=(0,_util.createPromiseCapability)(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(R));const C=D=>{x.renderTasks.delete(k),(this.cleanupAfterRender||a)&&(this.pendingCleanup=!0),this._tryCleanup(),D?(k.capability.reject(D),this._abortOperatorList({intentState:x,reason:D instanceof Error?D:new Error(D)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},k=new InternalRenderTask({callback:C,params:{canvasContext:e,viewport:l,transform:u,imageLayer:E,background:p},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:L,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:s,useRequestAnimationFrame:!a,pdfBug:this._pdfBug});(x.renderTasks||(x.renderTasks=new Set)).add(k);const y=k.task;return Promise.all([x.displayReadyCapability.promise,j]).then(([D,V])=>{if(this.pendingCleanup){C();return}this._stats&&this._stats.time("Rendering"),k.initializeGraphics({transparency:D,optionalContentConfig:V}),k.operatorListChanged()}).catch(C),y}getOperatorList({intent:e="display",annotationMode:l=_util.AnnotationMode.ENABLE}={}){function r(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(E))}const f=this._transport.getRenderingIntent(e,l,!0);let u=this._intentStates.get(f.cacheKey);u||(u=Object.create(null),this._intentStates.set(f.cacheKey,u));let E;return u.opListReadCapability||(E=Object.create(null),E.operatorListChanged=r,u.opListReadCapability=(0,_util.createPromiseCapability)(),(u.renderTasks||(u.renderTasks=new Set)).add(E),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(f)),u.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:l=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:l===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const l=this.streamTextContent(e);return new Promise(function(r,f){function u(){E.read().then(function({value:p,done:j}){if(j){r(T);return}Object.assign(T.styles,p.styles),T.items.push(...p.items),u()},f)}const E=l.getReader(),T={items:[],styles:Object.create(null)};u()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const l of this._intentStates.values())if(this._abortOperatorList({intentState:l,reason:new Error("Page was destroyed."),force:!0}),!l.opListReadCapability)for(const r of l.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:l,operatorList:r}of this._intentStates.values())if(l.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,l){const r=this._intentStates.get(l);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}_renderPageChunk(e,l){for(let r=0,f=e.length;r<f;r++)l.operatorList.fnArray.push(e.fnArray[r]),l.operatorList.argsArray.push(e.argsArray[r]);l.operatorList.lastChunk=e.lastChunk;for(const r of l.renderTasks)r.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:l}){const f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:l,annotationStorage:e&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),u=this._intentStates.get(l);u.streamReader=f;const E=()=>{f.read().then(({value:T,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(T,u),E())},T=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();this._tryCleanup()}if(u.displayReadyCapability)u.displayReadyCapability.reject(T);else if(u.opListReadCapability)u.opListReadCapability.reject(T);else throw T}})};E()}_abortOperatorList({intentState:e,reason:l,force:r=!1}){if(!!e.streamReader){if(!r){if(e.renderTasks.size>0)return;if(l instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:l,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(l.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[f,u]of this._intentStates)if(u===e){this._intentStates.delete(f);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,l){const r={data:structuredClone(e,l)};this._deferred.then(()=>{for(const f of this._listeners)f.call(this,r)})}addEventListener(e,l){this._listeners.push(l)}removeEventListener(e,l){const r=this._listeners.indexOf(l);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const P=(et=document==null?void 0:document.currentScript)==null?void 0:et.src;P&&(PDFWorkerUtil.fallbackWorkerSrc=P.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(P){const e=`importScripts("${P}");`;return URL.createObjectURL(new Blob([e]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:P=null,port:e=null,verbosity:l=(0,_util.getVerbosityLevel)()}={}){if(e&&_PDFWorker._workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=P,this.destroyed=!1,this.verbosity=l,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){_PDFWorker._workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(P){this._port=P,this._messageHandler=new _message_handler.MessageHandler("main","worker",P),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let P=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,P)||(P=PDFWorkerUtil.createCDNWrapper(new URL(P,window.location).href));const e=new Worker(P),l=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",f),l.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||r()};e.addEventListener("error",f),l.on("test",E=>{if(e.removeEventListener("error",f),this.destroyed){r();return}E?(this._messageHandler=l,this._port=e,this._webWorker=e,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),l.destroy(),e.terminate())}),l.on("ready",E=>{if(e.removeEventListener("error",f),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const E=new Uint8Array([255]);try{l.send("test",E,[E.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),E[0]=0,l.send("test",E)}};u();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(P=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const l=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(l+"_worker",l,e);P.setup(r,e);const f=new _message_handler.MessageHandler(l,l+"_worker",e);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(P=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${P.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(P){if(!(P!=null&&P.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(P.port)?this._workerPorts.get(P.port):new _PDFWorker(P)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var P;try{return((P=globalThis.pdfjsWorker)==null?void 0:P.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(e,l,r,f){Pt(this,A,null);Pt(this,G,new Map);Pt(this,o,new Map);Pt(this,Z,null);this.messageHandler=e,this.loadingTask=l,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:l.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,f.useWorkerFetch||(this.CMapReaderFactory=new f.CMapReaderFactory({baseUrl:f.cMapUrl,isCompressed:f.cMapPacked}),this.StandardFontDataFactory=new f.StandardFontDataFactory({baseUrl:f.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return pt(this,A)}getRenderingIntent(e,l=_util.AnnotationMode.ENABLE,r=!1){let f=_util.RenderingIntentFlag.DISPLAY,u="";switch(e){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(l){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,u=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${l}`)}return r&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:`${f}_${u}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of pt(this,G).values())e.push(r._destroy());pt(this,G).clear(),pt(this,o).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const l=this.messageHandler.sendWithPromise("Terminate",null);return e.push(l),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Et(this,Z,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:l}=this;e.on("GetReader",(r,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=u=>{this._lastProgress={loaded:u.loaded,total:u.total}},f.onPull=()=>{this._fullReader.read().then(function({value:u,done:E}){if(E){f.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(u),"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{f.error(u)})},f.onCancel=u=>{this._fullReader.cancel(u),f.ready.catch(E=>{if(!this.destroyed)throw E})}}),e.on("ReaderHeadersReady",r=>{const f=(0,_util.createPromiseCapability)(),u=this._fullReader;return u.headersReady.then(()=>{var E;(!u.isStreamingSupported||!u.isRangeSupported)&&(this._lastProgress&&((E=l.onProgress)==null||E.call(l,this._lastProgress)),u.onProgress=T=>{var p;(p=l.onProgress)==null||p.call(l,{loaded:T.loaded,total:T.total})}),f.resolve({isStreamingSupported:u.isStreamingSupported,isRangeSupported:u.isRangeSupported,contentLength:u.contentLength})},f.reject),f.promise}),e.on("GetRangeReader",(r,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const u=this._networkStream.getRangeReader(r.begin,r.end);if(!u){f.close();return}f.onPull=()=>{u.read().then(function({value:E,done:T}){if(T){f.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(E),"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{f.error(E)})},f.onCancel=E=>{u.cancel(E),f.ready.catch(T=>{if(!this.destroyed)throw T})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,l._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let f;switch(r.name){case"PasswordException":f=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":f=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}l._capability.reject(f)}),e.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),l.onPassword){const f=u=>{u instanceof Error?this._passwordCapability.reject(u):this._passwordCapability.resolve({password:u})};try{l.onPassword(f,r.code)}catch(u){this._passwordCapability.reject(u)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),e.on("DataLoaded",r=>{var f;(f=l.onProgress)==null||f.call(l,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;pt(this,G).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,f,u])=>{var E;if(!this.destroyed&&!this.commonObjs.has(r))switch(f){case"Font":const T=this._params;if("error"in u){const L=u.error;(0,_util.warn)(`Error during font loading: ${L}`),this.commonObjs.resolve(r,L);break}let p=null;T.pdfBug&&((E=globalThis.FontInspector)==null?void 0:E.enabled)&&(p={registerFont(L,R){globalThis.FontInspector.fontAdded(L,R)}});const j=new _font_loader.FontFaceObject(u,{isEvalSupported:T.isEvalSupported,disableFontFace:T.disableFontFace,ignoreErrors:T.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:p});this.fontLoader.bind(j).catch(L=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!T.fontExtraProperties&&j.data&&(j.data=null),this.commonObjs.resolve(r,j)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,u);break;default:throw new Error(`Got unknown common object type ${f}`)}}),e.on("obj",([r,f,u,E])=>{var p;if(this.destroyed)return;const T=pt(this,G).get(f);if(!T.objs.has(r))switch(u){case"Image":T.objs.resolve(r,E);const j=8e6;((p=E==null?void 0:E.data)==null?void 0:p.length)>j&&(T.cleanupAfterRender=!0);break;case"Pattern":T.objs.resolve(r,E);break;default:throw new Error(`Got unknown object type ${u}`)}}),e.on("DocProgress",r=>{var f;this.destroyed||(f=l.onProgress)==null||f.call(l,{loaded:r.loaded,total:r.total})}),e.on("DocStats",r=>{this.destroyed||Et(this,A,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var l,r;this.destroyed||(r=(l=this.loadingTask).onUnsupportedFeature)==null||r.call(l,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const l=e-1,r=pt(this,o).get(l);if(r)return r;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:l}).then(u=>{if(this.destroyed)throw new Error("Transport destroyed");const E=new PDFPageProxy(l,u,this,this._params.ownerDocument,this._params.pdfBug);return pt(this,G).set(l,E),E});return pt(this,o).set(l,f),f}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,l){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:l})}saveDocument(){var e,l;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(l=(e=this._fullReader)==null?void 0:e.filename)!=null?l:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return pt(this,Z)||Et(this,Z,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var l,r,f,u;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(r=(l=this._fullReader)==null?void 0:l.filename)!=null?r:null,contentLength:(u=(f=this._fullReader)==null?void 0:f.contentLength)!=null?u:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const l of pt(this,G).values())if(!l.cleanup())throw new Error(`startCleanup: Page ${l.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),Et(this,Z,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}A=new WeakMap,G=new WeakMap,o=new WeakMap,Z=new WeakMap;class PDFObjects{constructor(){Pt(this,$);Pt(this,H,Object.create(null))}get(e,l=null){if(l){const f=Dt(this,$,Ht).call(this,e);return f.capability.promise.then(()=>l(f.data)),null}const r=pt(this,H)[e];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const l=pt(this,H)[e];return(l==null?void 0:l.capability.settled)||!1}resolve(e,l=null){const r=Dt(this,$,Ht).call(this,e);r.data=l,r.capability.resolve()}clear(){Et(this,H,Object.create(null))}}H=new WeakMap,$=new WeakSet,Ht=function(e){const l=pt(this,H)[e];return l||(pt(this,H)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:e,params:l,objs:r,commonObjs:f,annotationCanvasMap:u,operatorList:E,pageIndex:T,canvasFactory:p,useRequestAnimationFrame:j=!1,pdfBug:L=!1}){this.callback=e,this.params=l,this.objs=r,this.commonObjs=f,this.annotationCanvasMap=u,this.operatorListIdx=null,this.operatorList=E,this._pageIndex=T,this.canvasFactory=p,this._pdfBug=L,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=j===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=l.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:l}){var p;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&((p=globalThis.StepperManager)==null?void 0:p.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:f,transform:u,imageLayer:E,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,E,l,this.annotationCanvasMap),this.gfx.beginDrawing({transform:u,viewport:f,transparency:e,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}const version="2.13.216";exports.version=version;const build="399a0ec60";exports.build=build},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.StatTimer=A.RenderingCancelledException=A.PixelsPerInch=A.PageViewport=A.PDFDateString=A.DOMStandardFontDataFactory=A.DOMSVGFactory=A.DOMCanvasFactory=A.DOMCMapReaderFactory=void 0,A.deprecated=s,A.getFilenameFromUrl=p,A.getPdfFilenameFromUrl=j,A.getXfaPageViewport=k,A.isDataScheme=E,A.isPdfFile=T,A.isValidFetchUrl=R,A.loadScript=x;var o=G(6),Z=G(1);const H="http://www.w3.org/2000/svg",y=class{};let $=y;jt($,"CSS",96),jt($,"PDF",72),jt($,"PDF_TO_CSS_UNITS",y.CSS/y.PDF),A.PixelsPerInch=$;class U extends o.BaseCanvasFactory{constructor({ownerDocument:w=globalThis.document}={}){super(),this._document=w}_createCanvas(w,D){const V=this._document.createElement("canvas");return V.width=w,V.height=D,V}}A.DOMCanvasFactory=U;async function P(M,w=!1){if(R(M,document.baseURI)){const D=await fetch(M);if(!D.ok)throw new Error(D.statusText);return w?new Uint8Array(await D.arrayBuffer()):(0,Z.stringToBytes)(await D.text())}return new Promise((D,V)=>{const W=new XMLHttpRequest;W.open("GET",M,!0),w&&(W.responseType="arraybuffer"),W.onreadystatechange=()=>{if(W.readyState===XMLHttpRequest.DONE){if(W.status===200||W.status===0){let z;if(w&&W.response?z=new Uint8Array(W.response):!w&&W.responseText&&(z=(0,Z.stringToBytes)(W.responseText)),z){D(z);return}}V(new Error(W.statusText))}},W.send(null)})}class e extends o.BaseCMapReaderFactory{_fetchData(w,D){return P(w,this.isCompressed).then(V=>({cMapData:V,compressionType:D}))}}A.DOMCMapReaderFactory=e;class l extends o.BaseStandardFontDataFactory{_fetchData(w){return P(w,!0)}}A.DOMStandardFontDataFactory=l;class r extends o.BaseSVGFactory{_createSVG(w){return document.createElementNS(H,w)}}A.DOMSVGFactory=r;class f{constructor({viewBox:w,scale:D,rotation:V,offsetX:W=0,offsetY:z=0,dontFlip:Q=!1}){this.viewBox=w,this.scale=D,this.rotation=V,this.offsetX=W,this.offsetY=z;const K=(w[2]+w[0])/2,m=(w[3]+w[1])/2;let i,n,h,b;switch(V%=360,V<0&&(V+=360),V){case 180:i=-1,n=0,h=0,b=1;break;case 90:i=0,n=1,h=1,b=0;break;case 270:i=0,n=-1,h=-1,b=0;break;case 0:i=1,n=0,h=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Q&&(h=-h,b=-b);let S,v,t,d;i===0?(S=Math.abs(m-w[1])*D+W,v=Math.abs(K-w[0])*D+z,t=Math.abs(w[3]-w[1])*D,d=Math.abs(w[2]-w[0])*D):(S=Math.abs(K-w[0])*D+W,v=Math.abs(m-w[1])*D+z,t=Math.abs(w[2]-w[0])*D,d=Math.abs(w[3]-w[1])*D),this.transform=[i*D,n*D,h*D,b*D,S-i*D*K-h*D*m,v-n*D*K-b*D*m],this.width=t,this.height=d}clone({scale:w=this.scale,rotation:D=this.rotation,offsetX:V=this.offsetX,offsetY:W=this.offsetY,dontFlip:z=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:w,rotation:D,offsetX:V,offsetY:W,dontFlip:z})}convertToViewportPoint(w,D){return Z.Util.applyTransform([w,D],this.transform)}convertToViewportRectangle(w){const D=Z.Util.applyTransform([w[0],w[1]],this.transform),V=Z.Util.applyTransform([w[2],w[3]],this.transform);return[D[0],D[1],V[0],V[1]]}convertToPdfPoint(w,D){return Z.Util.applyInverseTransform([w,D],this.transform)}}A.PageViewport=f;class u extends Z.BaseException{constructor(w,D){super(w,"RenderingCancelledException"),this.type=D}}A.RenderingCancelledException=u;function E(M){const w=M.length;let D=0;for(;D<w&&M[D].trim()==="";)D++;return M.substring(D,D+5).toLowerCase()==="data:"}function T(M){return typeof M=="string"&&/\.pdf$/i.test(M)}function p(M){const w=M.indexOf("#"),D=M.indexOf("?"),V=Math.min(w>0?w:M.length,D>0?D:M.length);return M.substring(M.lastIndexOf("/",V)+1,V)}function j(M,w="document.pdf"){if(typeof M!="string")return w;if(E(M))return(0,Z.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),w;const D=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,V=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,W=D.exec(M);let z=V.exec(W[1])||V.exec(W[2])||V.exec(W[3]);if(z&&(z=z[0],z.includes("%")))try{z=V.exec(decodeURIComponent(z))[0]}catch{}return z||w}class L{constructor(){this.started=Object.create(null),this.times=[]}time(w){w in this.started&&(0,Z.warn)(`Timer is already running for ${w}`),this.started[w]=Date.now()}timeEnd(w){w in this.started||(0,Z.warn)(`Timer has not been started for ${w}`),this.times.push({name:w,start:this.started[w],end:Date.now()}),delete this.started[w]}toString(){const w=[];let D=0;for(const V of this.times){const W=V.name;W.length>D&&(D=W.length)}for(const V of this.times){const W=V.end-V.start;w.push(`${V.name.padEnd(D)} ${W}ms
`)}return w.join("")}}A.StatTimer=L;function R(M,w){try{const{protocol:D}=w?new URL(M,w):new URL(M);return D==="http:"||D==="https:"}catch{return!1}}function x(M,w=!1){return new Promise((D,V)=>{const W=document.createElement("script");W.src=M,W.onload=function(z){w&&W.remove(),D(z)},W.onerror=function(){V(new Error(`Cannot load script at: ${W.src}`))},(document.head||document.documentElement).appendChild(W)})}function s(M){console.log("Deprecated API usage: "+M)}let a;class C{static toDateObject(w){if(!w||typeof w!="string")return null;a||(a=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const D=a.exec(w);if(!D)return null;const V=parseInt(D[1],10);let W=parseInt(D[2],10);W=W>=1&&W<=12?W-1:0;let z=parseInt(D[3],10);z=z>=1&&z<=31?z:1;let Q=parseInt(D[4],10);Q=Q>=0&&Q<=23?Q:0;let K=parseInt(D[5],10);K=K>=0&&K<=59?K:0;let m=parseInt(D[6],10);m=m>=0&&m<=59?m:0;const i=D[7]||"Z";let n=parseInt(D[8],10);n=n>=0&&n<=23?n:0;let h=parseInt(D[9],10)||0;return h=h>=0&&h<=59?h:0,i==="-"?(Q+=n,K+=h):i==="+"&&(Q-=n,K-=h),new Date(Date.UTC(V,W,z,Q,K,m))}}A.PDFDateString=C;function k(M,{scale:w=1,rotation:D=0}){const{width:V,height:W}=M.attributes.style,z=[0,0,parseInt(V),parseInt(W)];return new f({viewBox:z,scale:w,rotation:D})}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.BaseStandardFontDataFactory=A.BaseSVGFactory=A.BaseCanvasFactory=A.BaseCMapReaderFactory=void 0;var o=G(1);class Z{constructor(){this.constructor===Z&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,l){if(e<=0||l<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,l);return{canvas:r,context:r.getContext("2d")}}reset(e,l,r){if(!e.canvas)throw new Error("Canvas is not specified");if(l<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=l,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,l){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}A.BaseCanvasFactory=Z;class H{constructor({baseUrl:e=null,isCompressed:l=!1}){this.constructor===H&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=l}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const l=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(l,r).catch(f=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${l}`)})}_fetchData(e,l){(0,o.unreachable)("Abstract method `_fetchData` called.")}}A.BaseCMapReaderFactory=H;class ${constructor({baseUrl:e=null}){this.constructor===$&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const l=`${this.baseUrl}${e}`;return this._fetchData(l).catch(r=>{throw new Error(`Unable to load font data at: ${l}`)})}_fetchData(e){(0,o.unreachable)("Abstract method `_fetchData` called.")}}A.BaseStandardFontDataFactory=$;class U{constructor(){this.constructor===U&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,l){if(e<=0||l<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",`${e}px`),r.setAttribute("height",`${l}px`),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${l}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,o.unreachable)("Abstract method `_createSVG` called.")}}A.BaseSVGFactory=U},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.FontLoader=A.FontFaceObject=void 0;var o=G(1);class Z{constructor({docId:P,onUnsupportedFeature:e,ownerDocument:l=globalThis.document,styleElement:r=null}){this.constructor===Z&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=P,this._onUnsupportedFeature=e,this._document=l,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(P){this.nativeFontFaces.push(P),this._document.fonts.add(P)}insertRule(P){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const l=e.sheet;l.insertRule(P,l.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(P){if(P.attached||P.missingFile)return;if(P.attached=!0,this.isFontLoadingAPISupported){const l=P.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(r){throw this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)(`Failed to load font '${l.family}': '${r}'.`),P.disableFontFace=!0,r}}return}const e=P.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const r=this._queueLoadingCallback(l);this._prepareFontLoadEvent([e],[P],r)})}}_queueLoadingCallback(P){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e;const P=!!((e=this._document)!=null&&e.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",P)}get isSyncFontLoadingSupported(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(P,e,l){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let H;A.FontLoader=H,A.FontLoader=H=class extends Z{constructor(P){super(P),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let P=!1;if(typeof navigator>"u")P=!0;else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(e==null?void 0:e[1])>=14&&(P=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){function e(){for((0,o.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;l.requests.length>0&&l.requests[0].done;){const f=l.requests.shift();setTimeout(f.callback,0)}}const l=this.loadingContext,r={id:`pdfjs-font-loading-${l.nextRequestId++}`,done:!1,complete:e,callback:P};return l.requests.push(r),r}get _loadTestFont(){const P=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,o.shadow)(this,"_loadTestFont",P())}_prepareFontLoadEvent(P,e,l){function r(V,W){return V.charCodeAt(W)<<24|V.charCodeAt(W+1)<<16|V.charCodeAt(W+2)<<8|V.charCodeAt(W+3)&255}function f(V,W,z,Q){const K=V.substring(0,W),m=V.substring(W+z);return K+Q+m}let u,E;const T=this._document.createElement("canvas");T.width=1,T.height=1;const p=T.getContext("2d");let j=0;function L(V,W){if(j++,j>30){(0,o.warn)("Load test font never loaded."),W();return}if(p.font="30px "+V,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(L.bind(null,V,W))}const R=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=f(x,976,R.length,R);const a=16,C=1482184792;let k=r(x,a);for(u=0,E=R.length-3;u<E;u+=4)k=k-C+r(R,u)|0;u<R.length&&(k=k-C+r(R+"XXX",u)|0),x=f(x,a,4,(0,o.string32)(k));const y=`url(data:font/opentype;base64,${btoa(x)});`,M=`@font-face {font-family:"${R}";src:${y}}`;this.insertRule(M);const w=[];for(const V of e)w.push(V.loadedName);w.push(R);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const V of w){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=V,D.appendChild(W)}this._document.body.appendChild(D),L(R,()=>{D.remove(),l.complete()})}};class ${constructor(P,{isEvalSupported:e=!0,disableFontFace:l=!1,ignoreErrors:r=!1,onUnsupportedFeature:f,fontRegistry:u=null}){this.compiledGlyphs=Object.create(null);for(const E in P)this[E]=P[E];this.isEvalSupported=e!==!1,this.disableFontFace=l===!0,this.ignoreErrors=r===!0,this._onUnsupportedFeature=f,this.fontRegistry=u}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let P;if(!this.cssFontInfo)P=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this.fontRegistry&&this.fontRegistry.registerFont(this),P}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const P=(0,o.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(P)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,e),l}getPathGenerator(P,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let l;try{l=P.get(this.loadedName+"_path_"+e)}catch(r){if(!this.ignoreErrors)throw r;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[e]=function(f,u){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){const r=[];for(const f of l){const u=f.args!==void 0?f.args.join(","):"";r.push("c.",f.cmd,"(",u,`);
`)}return this.compiledGlyphs[e]=new Function("c","size",r.join(""))}return this.compiledGlyphs[e]=function(r,f){for(const u of l)u.cmd==="scale"&&(u.args=[f,-f]),r[u.cmd].apply(r,u.args)}}}A.FontFaceObject=$},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.NodeStandardFontDataFactory=A.NodeCanvasFactory=A.NodeCMapReaderFactory=void 0;var o=G(6),Z=G(3),H=G(1);let $=class{constructor(){(0,H.unreachable)("Not implemented: NodeCanvasFactory")}};A.NodeCanvasFactory=$;let U=class{constructor(){(0,H.unreachable)("Not implemented: NodeCMapReaderFactory")}};A.NodeCMapReaderFactory=U;let P=class{constructor(){(0,H.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(A.NodeStandardFontDataFactory=P,Z.isNodeJS){const e=function(l){return new Promise((r,f)=>{require$$5.readFile(l,(E,T)=>{if(E||!T){f(new Error(E));return}r(new Uint8Array(T))})})};A.NodeCanvasFactory=$=class extends o.BaseCanvasFactory{_createCanvas(l,r){return require$$5.createCanvas(l,r)}},A.NodeCMapReaderFactory=U=class extends o.BaseCMapReaderFactory{_fetchData(l,r){return e(l).then(f=>({cMapData:f,compressionType:r}))}},A.NodeStandardFontDataFactory=P=class extends o.BaseStandardFontDataFactory{_fetchData(l){return e(l)}}}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationStorage=void 0;var o=G(1);class Z{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue($,U){const P=this._storage.get($);return P===void 0?U:Object.assign(U,P)}setValue($,U){const P=this._storage.get($);let e=!1;if(P!==void 0)for(const[l,r]of Object.entries(U))P[l]!==r&&(e=!0,P[l]=r);else e=!0,this._storage.set($,U);e&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,o.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}A.AnnotationStorage=Z},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.CanvasGraphics=void 0;var o=G(1),Z=G(11),H=G(5);const $=16,U=100,P=4096,e=15,l=10,r=1e3,f=16,u=1.000001;function E(m,i){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){i.save(),this.__originalSave()},m.restore=function(){i.restore(),this.__originalRestore()},m.translate=function(h,b){i.translate(h,b),this.__originalTranslate(h,b)},m.scale=function(h,b){i.scale(h,b),this.__originalScale(h,b)},m.transform=function(h,b,S,v,t,d){i.transform(h,b,S,v,t,d),this.__originalTransform(h,b,S,v,t,d)},m.setTransform=function(h,b,S,v,t,d){i.setTransform(h,b,S,v,t,d),this.__originalSetTransform(h,b,S,v,t,d)},m.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},m.rotate=function(h){i.rotate(h),this.__originalRotate(h)},m.clip=function(h){i.clip(h),this.__originalClip(h)},m.moveTo=function(n,h){i.moveTo(n,h),this.__originalMoveTo(n,h)},m.lineTo=function(n,h){i.lineTo(n,h),this.__originalLineTo(n,h)},m.bezierCurveTo=function(n,h,b,S,v,t){i.bezierCurveTo(n,h,b,S,v,t),this.__originalBezierCurveTo(n,h,b,S,v,t)},m.rect=function(n,h,b,S){i.rect(n,h,b,S),this.__originalRect(n,h,b,S)},m.closePath=function(){i.closePath(),this.__originalClosePath()},m.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}function T(m){if(m._transformStack&&(m._transformStack=[]),!m.mozCurrentTransform){m._originalSave=m.save,m._originalRestore=m.restore,m._originalRotate=m.rotate,m._originalScale=m.scale,m._originalTranslate=m.translate,m._originalTransform=m.transform,m._originalSetTransform=m.setTransform,m._originalResetTransform=m.resetTransform,m._transformMatrix=m._transformMatrix||[1,0,0,1,0,0],m._transformStack=[];try{const i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(m),"lineWidth");m._setLineWidth=i.set,m._getLineWidth=i.get,Object.defineProperty(m,"lineWidth",{set:function(h){this._setLineWidth(h*u)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(m,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(m,"mozCurrentTransformInverse",{get:function(){const[n,h,b,S,v,t]=this._transformMatrix,d=n*S-h*b,g=h*b-n*S;return[S/d,h/g,b/g,n/d,(S*v-b*t)/g,(h*v-n*t)/d]}}),m.save=function(){const n=this._transformMatrix;this._transformStack.push(n),this._transformMatrix=n.slice(0,6),this._originalSave()},m.restore=function(){this._transformStack.length===0&&(0,o.warn)("Tried to restore a ctx when the stack was already empty.");const n=this._transformStack.pop();n&&(this._transformMatrix=n,this._originalRestore())},m.translate=function(n,h){const b=this._transformMatrix;b[4]=b[0]*n+b[2]*h+b[4],b[5]=b[1]*n+b[3]*h+b[5],this._originalTranslate(n,h)},m.scale=function(n,h){const b=this._transformMatrix;b[0]*=n,b[1]*=n,b[2]*=h,b[3]*=h,this._originalScale(n,h)},m.transform=function(n,h,b,S,v,t){const d=this._transformMatrix;this._transformMatrix=[d[0]*n+d[2]*h,d[1]*n+d[3]*h,d[0]*b+d[2]*S,d[1]*b+d[3]*S,d[0]*v+d[2]*t+d[4],d[1]*v+d[3]*t+d[5]],m._originalTransform(n,h,b,S,v,t)},m.setTransform=function(n,h,b,S,v,t){this._transformMatrix=[n,h,b,S,v,t],m._originalSetTransform(n,h,b,S,v,t)},m.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],m._originalResetTransform()},m.rotate=function(n){const h=Math.cos(n),b=Math.sin(n),S=this._transformMatrix;this._transformMatrix=[S[0]*h+S[2]*b,S[1]*h+S[3]*b,S[0]*-b+S[2]*h,S[1]*-b+S[3]*h,S[4],S[5]],this._originalRotate(n)}}}class p{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,n,h,b){let S;return this.cache[i]!==void 0?(S=this.cache[i],this.canvasFactory.reset(S,n,h),S.context.setTransform(1,0,0,1,0,0)):(S=this.canvasFactory.create(n,h),this.cache[i]=S),b&&T(S.context),S}clear(){for(const i in this.cache){const n=this.cache[i];this.canvasFactory.destroy(n),delete this.cache[i]}}}function j(m){const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=m.width,b=m.height,S=h+1;let v,t,d,g;const _=new Uint8Array(S*(b+1)),c=h+7&-8,F=m.data,O=new Uint8Array(c*b);let N=0;for(v=0,t=F.length;v<t;v++){const tt=F[v];let st=128;for(;st>0;)O[N++]=tt&st?0:255,st>>=1}let q=0;for(N=0,O[N]!==0&&(_[0]=1,++q),d=1;d<h;d++)O[N]!==O[N+1]&&(_[d]=O[N]?2:1,++q),N++;for(O[N]!==0&&(_[d]=2,++q),v=1;v<b;v++){N=v*c,g=v*S,O[N-c]!==O[N]&&(_[g]=O[N]?1:8,++q);let tt=(O[N]?4:0)+(O[N-c]?8:0);for(d=1;d<h;d++)tt=(tt>>2)+(O[N+1]?4:0)+(O[N-c+1]?8:0),n[tt]&&(_[g+d]=n[tt],++q),N++;if(O[N-c]!==O[N]&&(_[g+d]=O[N]?2:4,++q),q>1e3)return null}for(N=c*(b-1),g=v*S,O[N]!==0&&(_[g]=8,++q),d=1;d<h;d++)O[N]!==O[N+1]&&(_[g+d]=O[N]?4:8,++q),N++;if(O[N]!==0&&(_[g+d]=4,++q),q>1e3)return null;const X=new Int32Array([0,S,-1,0,-S,0,0,0,1]),J=[];for(v=0;q&&v<=b;v++){let tt=v*S;const st=tt+h;for(;tt<st&&!_[tt];)tt++;if(tt===st)continue;const lt=[tt%S,v],it=tt;let ot=_[tt];do{const ct=X[ot];do tt+=ct;while(!_[tt]);const ut=_[tt];ut!==5&&ut!==10?(ot=ut,_[tt]=0):(ot=ut&51*ot>>4,_[tt]&=ot>>2|ot<<2),lt.push(tt%S,tt/S|0),_[tt]||--q}while(it!==tt);J.push(lt),--v}return function(tt){tt.save(),tt.scale(1/h,-1/b),tt.translate(0,-b),tt.beginPath();for(let st=0,lt=J.length;st<lt;st++){const it=J[st];tt.moveTo(it[0],it[1]);for(let ot=2,ct=it.length;ot<ct;ot+=2)tt.lineTo(it[ot],it[ot+1])}tt.fill(),tt.beginPath(),tt.restore()}}class L{constructor(i,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,i,n])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,n){this.x=i,this.y=n}updatePathMinMax(i,n,h){[n,h]=o.Util.applyTransform([n,h],i),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,h),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,h)}updateCurvePathMinMax(i,n,h,b,S,v,t,d,g){const _=o.Util.bezierBoundingBox(n,h,b,S,v,t,d,g);this.updatePathMinMax(i,_[0],_[1]),this.updatePathMinMax(i,_[2],_[3])}getPathBoundingBox(i=Z.PathType.FILL,n=null){const h=[this.minX,this.minY,this.maxX,this.maxY];if(i===Z.PathType.STROKE){n||(0,o.unreachable)("Stroke bounding box must include transform.");const b=o.Util.singularValueDecompose2dScale(n),S=b[0]*this.lineWidth/2,v=b[1]*this.lineWidth/2;h[0]-=S,h[1]-=v,h[2]+=S,h[3]+=v}return h}updateClipFromPath(){const i=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=Z.PathType.FILL,n=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(i,n))}}function R(m,i,n=null){if(typeof ImageData<"u"&&i instanceof ImageData){m.putImageData(i,0,0);return}const h=i.height,b=i.width,S=h%f,v=(h-S)/f,t=S===0?v:v+1,d=m.createImageData(b,f);let g=0,_;const c=i.data,F=d.data;let O,N,q,X,J,nt,tt,st;if(n)switch(n.length){case 1:J=n[0],nt=n[0],tt=n[0],st=n[0];break;case 4:J=n[0],nt=n[1],tt=n[2],st=n[3];break}if(i.kind===o.ImageKind.GRAYSCALE_1BPP){const lt=c.byteLength,it=new Uint32Array(F.buffer,0,F.byteLength>>2),ot=it.length,ct=b+7>>3;let ut=4294967295,mt=o.IsLittleEndianCached.value?4278190080:255;for(st&&st[0]===255&&st[255]===0&&([ut,mt]=[mt,ut]),O=0;O<t;O++){for(q=O<v?f:S,_=0,N=0;N<q;N++){const Ct=lt-g;let _t=0;const vt=Ct>ct?b:Ct*8-7,At=vt&-8;let St=0,ft=0;for(;_t<At;_t+=8)ft=c[g++],it[_++]=ft&128?ut:mt,it[_++]=ft&64?ut:mt,it[_++]=ft&32?ut:mt,it[_++]=ft&16?ut:mt,it[_++]=ft&8?ut:mt,it[_++]=ft&4?ut:mt,it[_++]=ft&2?ut:mt,it[_++]=ft&1?ut:mt;for(;_t<vt;_t++)St===0&&(ft=c[g++],St=128),it[_++]=ft&St?ut:mt,St>>=1}for(;_<ot;)it[_++]=0;m.putImageData(d,0,O*f)}}else if(i.kind===o.ImageKind.RGBA_32BPP){const lt=!!(J||nt||tt);for(N=0,X=b*f*4,O=0;O<v;O++){if(F.set(c.subarray(g,g+X)),g+=X,lt)for(let it=0;it<X;it+=4)J&&(F[it+0]=J[F[it+0]]),nt&&(F[it+1]=nt[F[it+1]]),tt&&(F[it+2]=tt[F[it+2]]);m.putImageData(d,0,N),N+=f}if(O<t){if(X=b*S*4,F.set(c.subarray(g,g+X)),lt)for(let it=0;it<X;it+=4)J&&(F[it+0]=J[F[it+0]]),nt&&(F[it+1]=nt[F[it+1]]),tt&&(F[it+2]=tt[F[it+2]]);m.putImageData(d,0,N)}}else if(i.kind===o.ImageKind.RGB_24BPP){const lt=!!(J||nt||tt);for(q=f,X=b*q,O=0;O<t;O++){for(O>=v&&(q=S,X=b*q),_=0,N=X;N--;)F[_++]=c[g++],F[_++]=c[g++],F[_++]=c[g++],F[_++]=255;if(lt)for(let it=0;it<_;it+=4)J&&(F[it+0]=J[F[it+0]]),nt&&(F[it+1]=nt[F[it+1]]),tt&&(F[it+2]=tt[F[it+2]]);m.putImageData(d,0,O*f)}}else throw new Error(`bad image kind: ${i.kind}`)}function x(m,i){const n=i.height,h=i.width,b=n%f,S=(n-b)/f,v=b===0?S:S+1,t=m.createImageData(h,f);let d=0;const g=i.data,_=t.data;for(let c=0;c<v;c++){const F=c<S?f:b;let O=3;for(let N=0;N<F;N++){let q,X=0;for(let J=0;J<h;J++)X||(q=g[d++],X=128),_[O]=q&X?0:255,O+=4,X>>=1}m.putImageData(t,0,c*f)}}function s(m,i){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let h=0,b=n.length;h<b;h++){const S=n[h];m[S]!==void 0&&(i[S]=m[S])}m.setLineDash!==void 0&&(i.setLineDash(m.getLineDash()),i.lineDashOffset=m.lineDashOffset)}function a(m){m.strokeStyle="#000000",m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0)}function C(m,i,n,h){const b=m.length;for(let S=3;S<b;S+=4){const v=m[S];if(v===0)m[S-3]=i,m[S-2]=n,m[S-1]=h;else if(v<255){const t=255-v;m[S-3]=m[S-3]*v+i*t>>8,m[S-2]=m[S-2]*v+n*t>>8,m[S-1]=m[S-1]*v+h*t>>8}}}function k(m,i,n){const h=m.length,b=1/255;for(let S=3;S<h;S+=4){const v=n?n[m[S]]:m[S];i[S]=i[S]*v*b|0}}function y(m,i,n){const h=m.length;for(let b=3;b<h;b+=4){const S=m[b-3]*77+m[b-2]*152+m[b-1]*28;i[b]=n?i[b]*n[S>>8]>>8:i[b]*S>>16}}function M(m,i,n,h,b,S,v,t,d,g,_){const c=!!S,F=c?S[0]:0,O=c?S[1]:0,N=c?S[2]:0;let q;b==="Luminosity"?q=y:q=k;const J=Math.min(h,Math.ceil(1048576/n));for(let nt=0;nt<h;nt+=J){const tt=Math.min(J,h-nt),st=m.getImageData(t-g,nt+(d-_),n,tt),lt=i.getImageData(t,nt+d,n,tt);c&&C(st.data,F,O,N),q(st.data,lt.data,v),i.putImageData(lt,t,nt+d)}}function w(m,i,n,h){const b=h[0],S=h[1],v=h[2]-b,t=h[3]-S;v===0||t===0||(M(i.context,n,v,t,i.subtype,i.backdrop,i.transferMap,b,S,i.offsetX,i.offsetY),m.save(),m.globalAlpha=1,m.globalCompositeOperation="source-over",m.setTransform(1,0,0,1,0,0),m.drawImage(n.canvas,0,0),m.restore())}function D(m,i){const n=o.Util.singularValueDecompose2dScale(m);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const h=Math.fround((globalThis.devicePixelRatio||1)*H.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:n[0]<=h||n[1]<=h}const V=["butt","round","square"],W=["miter","round","bevel"],z={},Q={};class K{constructor(i,n,h,b,S,v,t){this.ctx=i,this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=h,this.canvasFactory=b,this.imageLayer=S,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=v,this.cachedCanvases=new p(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=t,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,i&&T(i),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:i,viewport:n,transparency:h=!1,background:b=null}){const S=this.ctx.canvas.width,v=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=b||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,S,v),this.ctx.restore(),h){const t=this.cachedCanvases.getCanvas("transparent",S,v,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),a(this.ctx),i&&(this.ctx.transform.apply(this.ctx,i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform.apply(this.ctx,n.transform),this.viewportScale=n.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(i,n,h,b){const S=i.argsArray,v=i.fnArray;let t=n||0;const d=S.length;if(d===t)return t;const g=d-t>l&&typeof h=="function",_=g?Date.now()+e:0;let c=0;const F=this.commonObjs,O=this.objs;let N;for(;;){if(b!==void 0&&t===b.nextBreakPoint)return b.breakIt(t,h),t;if(N=v[t],N!==o.OPS.dependency)this[N].apply(this,S[t]);else for(const q of S[t]){const X=q.startsWith("g_")?F:O;if(!X.has(q))return X.get(q,h),t}if(t++,t===d)return t;if(g&&++c>l){if(Date.now()>_)return h(),t;c=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(i,n){const h=i.width,b=i.height;let S=Math.max(Math.hypot(n[0],n[1]),1),v=Math.max(Math.hypot(n[2],n[3]),1),t=h,d=b,g="prescale1",_,c;for(;S>2&&t>1||v>2&&d>1;){let F=t,O=d;S>2&&t>1&&(F=Math.ceil(t/2),S/=t/F),v>2&&d>1&&(O=Math.ceil(d/2),v/=d/O),_=this.cachedCanvases.getCanvas(g,F,O),c=_.context,c.clearRect(0,0,F,O),c.drawImage(i,0,0,t,d,0,0,F,O),i=_.canvas,t=F,d=O,g=g==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:t,paintHeight:d}}_createMaskCanvas(i){const n=this.ctx,h=i.width,b=i.height,S=this.current.fillColor,v=this.current.patternFill,t=this.cachedCanvases.getCanvas("maskCanvas",h,b),d=t.context;x(d,i);const g=n.mozCurrentTransform;let _=o.Util.transform(g,[1/h,0,0,-1/b,0,0]);_=o.Util.transform(_,[1,0,0,1,0,-b]);const c=o.Util.applyTransform([0,0],_),F=o.Util.applyTransform([h,b],_),O=o.Util.normalizeRect([c[0],c[1],F[0],F[1]]),N=Math.ceil(O[2]-O[0]),q=Math.ceil(O[3]-O[1]),X=this.cachedCanvases.getCanvas("fillCanvas",N,q,!0),J=X.context,nt=Math.min(c[0],F[0]),tt=Math.min(c[1],F[1]);J.translate(-nt,-tt),J.transform.apply(J,_);const st=this._scaleImage(t.canvas,J.mozCurrentTransformInverse);J.imageSmoothingEnabled=D(J.mozCurrentTransform,i.interpolate),J.drawImage(st.img,0,0,st.img.width,st.img.height,0,0,h,b),J.globalCompositeOperation="source-in";const lt=o.Util.transform(J.mozCurrentTransformInverse,[1,0,0,1,-nt,-tt]);return J.fillStyle=v?S.getPattern(n,this,lt,Z.PathType.FILL):S,J.fillRect(0,0,h,b),{canvas:X.canvas,offsetX:Math.round(nt),offsetY:Math.round(tt)}}setLineWidth(i){this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=V[i]}setLineJoin(i){this.ctx.lineJoin=W[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,n){const h=this.ctx;h.setLineDash!==void 0&&(h.setLineDash(i),h.lineDashOffset=n)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(let n=0,h=i.length;n<h;n++){const b=i[n],S=b[0],v=b[1];switch(S){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v[0],v[1]);break;case"CA":this.current.strokeAlpha=b[1];break;case"ca":this.current.fillAlpha=b[1],this.ctx.globalAlpha=b[1];break;case"BM":this.ctx.globalCompositeOperation=v;break;case"SMask":this.current.activeSMask=v?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=v}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,n=this.ctx.canvas.height,h="smaskGroupAt"+this.groupLevel,b=this.cachedCanvases.getCanvas(h,i,n,!0);this.suspendedCtx=this.ctx,this.ctx=b.context;const S=this.ctx;S.setTransform.apply(S,this.suspendedCtx.mozCurrentTransform),s(this.suspendedCtx,S),E(S,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,h=this.suspendedCtx;w(h,n,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(i,n,h,b,S,v){this.ctx.transform(i,n,h,b,S,v),this._cachedGetSinglePixelWidth=null}constructPath(i,n){const h=this.ctx,b=this.current;let S=b.x,v=b.y,t,d;for(let g=0,_=0,c=i.length;g<c;g++)switch(i[g]|0){case o.OPS.rectangle:S=n[_++],v=n[_++];const F=n[_++],O=n[_++],N=S+F,q=v+O;h.moveTo(S,v),F===0||O===0?h.lineTo(N,q):(h.lineTo(N,v),h.lineTo(N,q),h.lineTo(S,q)),b.updatePathMinMax(h.mozCurrentTransform,S,v),b.updatePathMinMax(h.mozCurrentTransform,N,q),h.closePath();break;case o.OPS.moveTo:S=n[_++],v=n[_++],h.moveTo(S,v),b.updatePathMinMax(h.mozCurrentTransform,S,v);break;case o.OPS.lineTo:S=n[_++],v=n[_++],h.lineTo(S,v),b.updatePathMinMax(h.mozCurrentTransform,S,v);break;case o.OPS.curveTo:t=S,d=v,S=n[_+4],v=n[_+5],h.bezierCurveTo(n[_],n[_+1],n[_+2],n[_+3],S,v),b.updateCurvePathMinMax(h.mozCurrentTransform,t,d,n[_],n[_+1],n[_+2],n[_+3],S,v),_+=6;break;case o.OPS.curveTo2:t=S,d=v,h.bezierCurveTo(S,v,n[_],n[_+1],n[_+2],n[_+3]),b.updateCurvePathMinMax(h.mozCurrentTransform,t,d,S,v,n[_],n[_+1],n[_+2],n[_+3]),S=n[_+2],v=n[_+3],_+=4;break;case o.OPS.curveTo3:t=S,d=v,S=n[_+2],v=n[_+3],h.bezierCurveTo(n[_],n[_+1],S,v,S,v),b.updateCurvePathMinMax(h.mozCurrentTransform,t,d,n[_],n[_+1],S,v,S,v),_+=4;break;case o.OPS.closePath:h.closePath();break}b.setCurrentPoint(S,v)}closePath(){this.ctx.closePath()}stroke(i){i=typeof i<"u"?i:!0;const n=this.ctx,h=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof h=="object"&&(h==null?void 0:h.getPattern)){const b=this.getSinglePixelWidth();n.save(),n.strokeStyle=h.getPattern(n,this,n.mozCurrentTransformInverse,Z.PathType.STROKE),n.lineWidth=Math.max(b,this.current.lineWidth),n.stroke(),n.restore()}else{const b=this.getSinglePixelWidth();b<0&&-b>=this.current.lineWidth?(n.save(),n.resetTransform(),n.lineWidth=Math.floor(this._combinedScaleFactor),n.stroke(),n.restore()):(n.lineWidth=Math.max(b,this.current.lineWidth),n.stroke())}i&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i){i=typeof i<"u"?i:!0;const n=this.ctx,h=this.current.fillColor,b=this.current.patternFill;let S=!1;b&&(n.save(),n.fillStyle=h.getPattern(n,this,n.mozCurrentTransformInverse,Z.PathType.FILL),S=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),S&&n.restore(),i&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z}eoClip(){this.pendingClip=Q}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,n=this.ctx;if(i===void 0){n.beginPath();return}n.save(),n.beginPath();for(let h=0;h<i.length;h++){const b=i[h];n.setTransform.apply(n,b.transform),n.translate(b.x,b.y),b.addToPath(n,b.fontSize)}n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,n){const h=this.commonObjs.get(i),b=this.current;if(!h)throw new Error(`Can't find font for ${i}`);if(b.fontMatrix=h.fontMatrix||o.FONT_IDENTITY_MATRIX,(b.fontMatrix[0]===0||b.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+i),n<0?(n=-n,b.fontDirection=-1):b.fontDirection=1,this.current.font=h,this.current.fontSize=n,h.isType3Font)return;const S=h.loadedName||"sans-serif";let v="normal";h.black?v="900":h.bold&&(v="bold");const t=h.italic?"italic":"normal",d=`"${S}", ${h.fallbackName}`;let g=n;n<$?g=$:n>U&&(g=U),this.current.fontSizeScale=n/g,this.ctx.font=`${t} ${v} ${g}px ${d}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,n){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=n}setLeadingMoveText(i,n){this.setLeading(-n),this.moveText(i,n)}setTextMatrix(i,n,h,b,S,v){this.current.textMatrix=[i,n,h,b,S,v],this.current.textMatrixScale=Math.hypot(i,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,n,h,b,S){const v=this.ctx,t=this.current,d=t.font,g=t.textRenderingMode,_=t.fontSize/t.fontSizeScale,c=g&o.TextRenderingMode.FILL_STROKE_MASK,F=!!(g&o.TextRenderingMode.ADD_TO_PATH_FLAG),O=t.patternFill&&!d.missingFile;let N;(d.disableFontFace||F||O)&&(N=d.getPathGenerator(this.commonObjs,i)),d.disableFontFace||O?(v.save(),v.translate(n,h),v.beginPath(),N(v,_),b&&v.setTransform.apply(v,b),(c===o.TextRenderingMode.FILL||c===o.TextRenderingMode.FILL_STROKE)&&v.fill(),(c===o.TextRenderingMode.STROKE||c===o.TextRenderingMode.FILL_STROKE)&&(S&&(v.resetTransform(),v.lineWidth=Math.floor(this._combinedScaleFactor)),v.stroke()),v.restore()):((c===o.TextRenderingMode.FILL||c===o.TextRenderingMode.FILL_STROKE)&&v.fillText(i,n,h),(c===o.TextRenderingMode.STROKE||c===o.TextRenderingMode.FILL_STROKE)&&(S?(v.save(),v.moveTo(n,h),v.resetTransform(),v.lineWidth=Math.floor(this._combinedScaleFactor),v.strokeText(i,0,0),v.restore()):v.strokeText(i,n,h))),F&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:v.mozCurrentTransform,x:n,y:h,fontSize:_,addToPath:N})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const n=i.getImageData(0,0,10,10).data;let h=!1;for(let b=3;b<n.length;b+=4)if(n[b]>0&&n[b]<255){h=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",h)}showText(i){const n=this.current,h=n.font;if(h.isType3Font)return this.showType3Text(i);const b=n.fontSize;if(b===0)return;const S=this.ctx,v=n.fontSizeScale,t=n.charSpacing,d=n.wordSpacing,g=n.fontDirection,_=n.textHScale*g,c=i.length,F=h.vertical,O=F?1:-1,N=h.defaultVMetrics,q=b*n.fontMatrix[0],X=n.textRenderingMode===o.TextRenderingMode.FILL&&!h.disableFontFace&&!n.patternFill;S.save(),S.transform.apply(S,n.textMatrix),S.translate(n.x,n.y+n.textRise),g>0?S.scale(_,-1):S.scale(_,1);let J;if(n.patternFill){S.save();const ot=n.fillColor.getPattern(S,this,S.mozCurrentTransformInverse,Z.PathType.FILL);J=S.mozCurrentTransform,S.restore(),S.fillStyle=ot}let nt=n.lineWidth,tt=!1;const st=n.textMatrixScale;if(st===0||nt===0){const ot=n.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(ot===o.TextRenderingMode.STROKE||ot===o.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,nt=this.getSinglePixelWidth(),tt=nt<0)}else nt/=st;v!==1&&(S.scale(v,v),nt/=v),S.lineWidth=nt;let lt=0,it;for(it=0;it<c;++it){const ot=i[it];if(typeof ot=="number"){lt+=O*ot*b/1e3;continue}let ct=!1;const ut=(ot.isSpace?d:0)+t,mt=ot.fontChar,Ct=ot.accent;let _t,vt,At=ot.width;if(F){const ft=ot.vmetric||N,Tt=-(ot.vmetric?ft[1]:At*.5)*q,Ut=ft[2]*q;At=ft?-ft[0]:At,_t=Tt/v,vt=(lt+Ut)/v}else _t=lt/v,vt=0;if(h.remeasure&&At>0){const ft=S.measureText(mt).width*1e3/b*v;if(At<ft&&this.isFontSubpixelAAEnabled){const Tt=At/ft;ct=!0,S.save(),S.scale(Tt,1),_t/=Tt}else At!==ft&&(_t+=(At-ft)/2e3*b/v)}if(this.contentVisible&&(ot.isInFont||h.missingFile)){if(X&&!Ct)S.fillText(mt,_t,vt);else if(this.paintChar(mt,_t,vt,J,tt),Ct){const ft=_t+b*Ct.offset.x/v,Tt=vt-b*Ct.offset.y/v;this.paintChar(Ct.fontChar,ft,Tt,J,tt)}}let St;F?St=At*q-ut*g:St=At*q+ut*g,lt+=St,ct&&S.restore()}F?n.y-=lt:n.x+=lt*_,S.restore(),this.compose()}showType3Text(i){const n=this.ctx,h=this.current,b=h.font,S=h.fontSize,v=h.fontDirection,t=b.vertical?1:-1,d=h.charSpacing,g=h.wordSpacing,_=h.textHScale*v,c=h.fontMatrix||o.FONT_IDENTITY_MATRIX,F=i.length,O=h.textRenderingMode===o.TextRenderingMode.INVISIBLE;let N,q,X,J;if(!(O||S===0)){for(this._cachedGetSinglePixelWidth=null,n.save(),n.transform.apply(n,h.textMatrix),n.translate(h.x,h.y),n.scale(_,v),N=0;N<F;++N){if(q=i[N],typeof q=="number"){J=t*q*S/1e3,this.ctx.translate(J,0),h.x+=J*_;continue}const nt=(q.isSpace?g:0)+d,tt=b.charProcOperatorList[q.operatorListId];if(!tt){(0,o.warn)(`Type3 character "${q.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=q,this.save(),n.scale(S,S),n.transform.apply(n,c),this.executeOperatorList(tt),this.restore()),X=o.Util.applyTransform([q.width,0],c)[0]*S+nt,n.translate(X,0),h.x+=X*_}n.restore(),this.processingType3=null}}setCharWidth(i,n){}setCharWidthAndBounds(i,n,h,b,S,v){this.ctx.rect(h,b,S-h,v-b),this.clip(),this.endPath()}getColorN_Pattern(i){let n;if(i[0]==="TilingPattern"){const h=i[1],b=this.baseTransform||this.ctx.mozCurrentTransform.slice(),S={createCanvasGraphics:v=>new K(v,this.commonObjs,this.objs,this.canvasFactory)};n=new Z.TilingPattern(i,h,this.ctx,S,b)}else n=this._getPattern(i[1],i[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,n,h){const b=o.Util.makeHexColor(i,n,h);this.ctx.strokeStyle=b,this.current.strokeColor=b}setFillRGBColor(i,n,h){const b=o.Util.makeHexColor(i,n,h);this.ctx.fillStyle=b,this.current.fillColor=b,this.current.patternFill=!1}_getPattern(i,n=null){let h;return this.cachedPatterns.has(i)?h=this.cachedPatterns.get(i):(h=(0,Z.getShadingPattern)(this.objs.get(i)),this.cachedPatterns.set(i,h)),n&&(h.matrix=n),h}shadingFill(i){if(!this.contentVisible)return;const n=this.ctx;this.save();const h=this._getPattern(i);n.fillStyle=h.getPattern(n,this,n.mozCurrentTransformInverse,Z.PathType.SHADING);const b=n.mozCurrentTransformInverse;if(b){const S=n.canvas,v=S.width,t=S.height,d=o.Util.applyTransform([0,0],b),g=o.Util.applyTransform([0,t],b),_=o.Util.applyTransform([v,0],b),c=o.Util.applyTransform([v,t],b),F=Math.min(d[0],g[0],_[0],c[0]),O=Math.min(d[1],g[1],_[1],c[1]),N=Math.max(d[0],g[0],_[0],c[0]),q=Math.max(d[1],g[1],_[1],c[1]);this.ctx.fillRect(F,O,N-F,q-O)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,n){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform.apply(this,i),this.baseTransform=this.ctx.mozCurrentTransform,n)){const h=n[2]-n[0],b=n[3]-n[1];this.ctx.rect(n[0],n[1],h,b),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,n[0],n[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,n[2],n[3]),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;i.isolated||(0,o.info)("TODO: Support non-isolated groups."),i.knockout&&(0,o.warn)("Knockout groups not supported.");const h=n.mozCurrentTransform;if(i.matrix&&n.transform.apply(n,i.matrix),!i.bbox)throw new Error("Bounding box is required.");let b=o.Util.getAxialAlignedBoundingBox(i.bbox,n.mozCurrentTransform);const S=[0,0,n.canvas.width,n.canvas.height];b=o.Util.intersect(b,S)||[0,0,0,0];const v=Math.floor(b[0]),t=Math.floor(b[1]);let d=Math.max(Math.ceil(b[2])-v,1),g=Math.max(Math.ceil(b[3])-t,1),_=1,c=1;d>P&&(_=d/P,d=P),g>P&&(c=g/P,g=P),this.current.startNewPathAndClipBox([0,0,d,g]);let F="groupAt"+this.groupLevel;i.smask&&(F+="_smask_"+this.smaskCounter++%2);const O=this.cachedCanvases.getCanvas(F,d,g,!0),N=O.context;N.scale(1/_,1/c),N.translate(-v,-t),N.transform.apply(N,h),i.smask?this.smaskStack.push({canvas:O.canvas,context:N,offsetX:v,offsetY:t,scaleX:_,scaleY:c,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(v,t),n.scale(_,c),n.save()),s(n,N),this.ctx=N,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,h=this.groupStack.pop();if(this.ctx=h,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const b=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,b);const S=o.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],b);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(S)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(i,n,h,b,S){if(this.save(),Array.isArray(n)&&n.length===4){const v=n[2]-n[0],t=n[3]-n[1];if(S&&this.annotationCanvasMap){h=h.slice(),h[4]-=n[0],h[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=v,n[3]=t;const[d,g]=o.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:_}=this,c=Math.ceil(v*this.outputScaleX*_),F=Math.ceil(t*this.outputScaleY*_);this.annotationCanvas=this.canvasFactory.create(c,F);const{canvas:O,context:N}=this.annotationCanvas;O.style.width=`calc(${v}px * var(--viewport-scale-factor))`,O.style.height=`calc(${t}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(i,O),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.setTransform(d,0,0,-g,0,t*g),T(this.ctx),a(this.ctx)}else a(this.ctx),this.ctx.rect(n[0],n[1],v,t),this.clip(),this.endPath()}this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,h),this.transform.apply(this,b)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(i){if(!this.contentVisible)return;const n=this.ctx,h=i.width,b=i.height,S=this.processingType3;if(S&&S.compiled===void 0&&(h<=r&&b<=r?S.compiled=j({data:i.data,width:h,height:b}):S.compiled=null),S!=null&&S.compiled){S.compiled(n);return}const v=this._createMaskCanvas(i),t=v.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(t,v.offsetX,v.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(i,n,h=0,b=0,S,v){if(!this.contentVisible)return;const t=this.ctx;t.save();const d=t.mozCurrentTransform;t.transform(n,h,b,S,0,0);const g=this._createMaskCanvas(i);t.setTransform(1,0,0,1,0,0);for(let _=0,c=v.length;_<c;_+=2){const F=o.Util.transform(d,[n,h,b,S,v[_],v[_+1]]),[O,N]=o.Util.applyTransform([0,0],F);t.drawImage(g.canvas,O,N)}t.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const n=this.ctx,h=this.current.fillColor,b=this.current.patternFill;for(let S=0,v=i.length;S<v;S++){const t=i[S],d=t.width,g=t.height,_=this.cachedCanvases.getCanvas("maskCanvas",d,g),c=_.context;c.save(),x(c,t),c.globalCompositeOperation="source-in",c.fillStyle=b?h.getPattern(c,this,n.mozCurrentTransformInverse,Z.PathType.FILL):h,c.fillRect(0,0,d,g),c.restore(),n.save(),n.transform.apply(n,t.transform),n.scale(1,-1),n.drawImage(_.canvas,0,0,d,g,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const n=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);if(!n){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(i,n,h,b){if(!this.contentVisible)return;const S=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);if(!S){(0,o.warn)("Dependent image isn't ready yet");return}const v=S.width,t=S.height,d=[];for(let g=0,_=b.length;g<_;g+=2)d.push({transform:[n,0,0,h,b[g],b[g+1]],x:0,y:0,w:v,h:t});this.paintInlineImageXObjectGroup(S,d)}paintInlineImageXObject(i){if(!this.contentVisible)return;const n=i.width,h=i.height,b=this.ctx;this.save(),b.scale(1/n,-1/h);let S;if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)S=i;else{const t=this.cachedCanvases.getCanvas("inlineImage",n,h),d=t.context;R(d,i,this.current.transferMaps),S=t.canvas}const v=this._scaleImage(S,b.mozCurrentTransformInverse);if(b.imageSmoothingEnabled=D(b.mozCurrentTransform,i.interpolate),b.drawImage(v.img,0,0,v.paintWidth,v.paintHeight,0,-h,n,h),this.imageLayer){const t=this.getCanvasPosition(0,-h);this.imageLayer.appendImage({imgData:i,left:t[0],top:t[1],width:n/b.mozCurrentTransformInverse[0],height:h/b.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(i,n){if(!this.contentVisible)return;const h=this.ctx,b=i.width,S=i.height,v=this.cachedCanvases.getCanvas("inlineImage",b,S),t=v.context;R(t,i,this.current.transferMaps);for(let d=0,g=n.length;d<g;d++){const _=n[d];if(h.save(),h.transform.apply(h,_.transform),h.scale(1,-1),h.drawImage(v.canvas,_.x,_.y,_.w,_.h,0,-1,1,1),this.imageLayer){const c=this.getCanvasPosition(_.x,_.y);this.imageLayer.appendImage({imgData:i,left:c[0],top:c[1],width:b,height:S})}h.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,n){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,n){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const n=this.ctx;this.pendingClip&&(this.pendingClip===Q?n.clip("evenodd"):n.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const i=this.ctx.mozCurrentTransform,n=Math.abs(i[0]*i[3]-i[2]*i[1]),h=i[0]**2+i[2]**2,b=i[1]**2+i[3]**2,S=Math.sqrt(Math.max(h,b))/n;h!==b&&this._combinedScaleFactor*S>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*S):n>Number.EPSILON?this._cachedGetSinglePixelWidth=S:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(i,n){const h=this.ctx.mozCurrentTransform;return[h[0]*i+h[2]*n+h[4],h[1]*i+h[3]*n+h[5]]}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}}A.CanvasGraphics=K;for(const m in o.OPS)K.prototype[m]!==void 0&&(K.prototype[o.OPS[m]]=K.prototype[m])},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.TilingPattern=A.PathType=void 0,A.getShadingPattern=f;var o=G(1);const Z={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};A.PathType=Z;function H(T,p){if(!p||typeof Path2D>"u")return;const j=p[2]-p[0],L=p[3]-p[1],R=new Path2D;R.rect(p[0],p[1],j,L),T.clip(R)}class ${constructor(){this.constructor===$&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class U extends ${constructor(p){super(),this._type=p[1],this._bbox=p[2],this._colorStops=p[3],this._p0=p[4],this._p1=p[5],this._r0=p[6],this._r1=p[7],this.matrix=null}_createGradient(p){let j;this._type==="axial"?j=p.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(j=p.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const L of this._colorStops)j.addColorStop(L[0],L[1]);return j}getPattern(p,j,L,R){let x;if(R===Z.STROKE||R===Z.FILL){const s=j.current.getClippedPathBoundingBox(R,p.mozCurrentTransform)||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,C=Math.ceil(s[3]-s[1])||1,k=j.cachedCanvases.getCanvas("pattern",a,C,!0),y=k.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-s[0],-s[1]),L=o.Util.transform(L,[1,0,0,1,s[0],s[1]]),y.transform.apply(y,j.baseTransform),this.matrix&&y.transform.apply(y,this.matrix),H(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),x=p.createPattern(k.canvas,"no-repeat");const M=new DOMMatrix(L);try{x.setTransform(M)}catch(w){(0,o.warn)(`RadialAxialShadingPattern.getPattern: "${w==null?void 0:w.message}".`)}}else H(p,this._bbox),x=this._createGradient(p);return x}}function P(T,p,j,L,R,x,s,a){const C=p.coords,k=p.colors,y=T.data,M=T.width*4;let w;C[j+1]>C[L+1]&&(w=j,j=L,L=w,w=x,x=s,s=w),C[L+1]>C[R+1]&&(w=L,L=R,R=w,w=s,s=a,a=w),C[j+1]>C[L+1]&&(w=j,j=L,L=w,w=x,x=s,s=w);const D=(C[j]+p.offsetX)*p.scaleX,V=(C[j+1]+p.offsetY)*p.scaleY,W=(C[L]+p.offsetX)*p.scaleX,z=(C[L+1]+p.offsetY)*p.scaleY,Q=(C[R]+p.offsetX)*p.scaleX,K=(C[R+1]+p.offsetY)*p.scaleY;if(V>=K)return;const m=k[x],i=k[x+1],n=k[x+2],h=k[s],b=k[s+1],S=k[s+2],v=k[a],t=k[a+1],d=k[a+2],g=Math.round(V),_=Math.round(K);let c,F,O,N,q,X,J,nt;for(let tt=g;tt<=_;tt++){if(tt<z){let ct;tt<V?ct=0:ct=(V-tt)/(V-z),c=D-(D-W)*ct,F=m-(m-h)*ct,O=i-(i-b)*ct,N=n-(n-S)*ct}else{let ct;tt>K?ct=1:z===K?ct=0:ct=(z-tt)/(z-K),c=W-(W-Q)*ct,F=h-(h-v)*ct,O=b-(b-t)*ct,N=S-(S-d)*ct}let st;tt<V?st=0:tt>K?st=1:st=(V-tt)/(V-K),q=D-(D-Q)*st,X=m-(m-v)*st,J=i-(i-t)*st,nt=n-(n-d)*st;const lt=Math.round(Math.min(c,q)),it=Math.round(Math.max(c,q));let ot=M*tt+lt*4;for(let ct=lt;ct<=it;ct++)st=(c-ct)/(c-q),st<0?st=0:st>1&&(st=1),y[ot++]=F-(F-X)*st|0,y[ot++]=O-(O-J)*st|0,y[ot++]=N-(N-nt)*st|0,y[ot++]=255}}function e(T,p,j){const L=p.coords,R=p.colors;let x,s;switch(p.type){case"lattice":const a=p.verticesPerRow,C=Math.floor(L.length/a)-1,k=a-1;for(x=0;x<C;x++){let y=x*a;for(let M=0;M<k;M++,y++)P(T,j,L[y],L[y+1],L[y+a],R[y],R[y+1],R[y+a]),P(T,j,L[y+a+1],L[y+1],L[y+a],R[y+a+1],R[y+1],R[y+a])}break;case"triangles":for(x=0,s=L.length;x<s;x+=3)P(T,j,L[x],L[x+1],L[x+2],R[x],R[x+1],R[x+2]);break;default:throw new Error("illegal figure")}}class l extends ${constructor(p){super(),this._coords=p[2],this._colors=p[3],this._figures=p[4],this._bounds=p[5],this._bbox=p[7],this._background=p[8],this.matrix=null}_createMeshCanvas(p,j,L){const a=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-a,y=Math.ceil(this._bounds[3])-C,M=Math.min(Math.ceil(Math.abs(k*p[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(y*p[1]*1.1)),3e3),D=k/M,V=y/w,W={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-C,scaleX:1/D,scaleY:1/V},z=M+2*2,Q=w+2*2,K=L.getCanvas("mesh",z,Q,!1),m=K.context,i=m.createImageData(M,w);if(j){const h=i.data;for(let b=0,S=h.length;b<S;b+=4)h[b]=j[0],h[b+1]=j[1],h[b+2]=j[2],h[b+3]=255}for(const h of this._figures)e(i,h,W);return m.putImageData(i,2,2),{canvas:K.canvas,offsetX:a-2*D,offsetY:C-2*V,scaleX:D,scaleY:V}}getPattern(p,j,L,R){H(p,this._bbox);let x;if(R===Z.SHADING)x=o.Util.singularValueDecompose2dScale(p.mozCurrentTransform);else if(x=o.Util.singularValueDecompose2dScale(j.baseTransform),this.matrix){const a=o.Util.singularValueDecompose2dScale(this.matrix);x=[x[0]*a[0],x[1]*a[1]]}const s=this._createMeshCanvas(x,R===Z.SHADING?null:this._background,j.cachedCanvases);return R!==Z.SHADING&&(p.setTransform.apply(p,j.baseTransform),this.matrix&&p.transform.apply(p,this.matrix)),p.translate(s.offsetX,s.offsetY),p.scale(s.scaleX,s.scaleY),p.createPattern(s.canvas,"no-repeat")}}class r extends ${getPattern(){return"hotpink"}}function f(T){switch(T[0]){case"RadialAxial":return new U(T);case"Mesh":return new l(T);case"Dummy":return new r}throw new Error(`Unknown IR type: ${T[0]}`)}const u={COLORED:1,UNCOLORED:2};class E{static get MAX_PATTERN_SIZE(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(p,j,L,R,x){this.operatorList=p[2],this.matrix=p[3]||[1,0,0,1,0,0],this.bbox=p[4],this.xstep=p[5],this.ystep=p[6],this.paintType=p[7],this.tilingType=p[8],this.color=j,this.ctx=L,this.canvasGraphicsFactory=R,this.baseTransform=x}createPatternCanvas(p){const j=this.operatorList,L=this.bbox,R=this.xstep,x=this.ystep,s=this.paintType,a=this.tilingType,C=this.color,k=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+a);const y=L[0],M=L[1],w=L[2],D=L[3],V=o.Util.singularValueDecompose2dScale(this.matrix),W=o.Util.singularValueDecompose2dScale(this.baseTransform),z=[V[0]*W[0],V[1]*W[1]],Q=this.getSizeAndScale(R,this.ctx.canvas.width,z[0]),K=this.getSizeAndScale(x,this.ctx.canvas.height,z[1]),m=p.cachedCanvases.getCanvas("pattern",Q.size,K.size,!0),i=m.context,n=k.createCanvasGraphics(i);n.groupLevel=p.groupLevel,this.setFillAndStrokeStyleToContext(n,s,C);let h=y,b=M,S=w,v=D;return y<0&&(h=0,S+=Math.abs(y)),M<0&&(b=0,v+=Math.abs(M)),i.translate(-(Q.scale*h),-(K.scale*b)),n.transform(Q.scale,0,0,K.scale,0,0),i.save(),this.clipBbox(n,h,b,S,v),n.baseTransform=n.ctx.mozCurrentTransform.slice(),n.executeOperatorList(j),n.endDrawing(),{canvas:m.canvas,scaleX:Q.scale,scaleY:K.scale,offsetX:h,offsetY:b}}getSizeAndScale(p,j,L){p=Math.abs(p);const R=Math.max(E.MAX_PATTERN_SIZE,j);let x=Math.ceil(p*L);return x>=R?x=R:L=x/p,{scale:L,size:x}}clipBbox(p,j,L,R,x){const s=R-j,a=x-L;p.ctx.rect(j,L,s,a),p.clip(),p.endPath()}setFillAndStrokeStyleToContext(p,j,L){const R=p.ctx,x=p.current;switch(j){case u.COLORED:const s=this.ctx;R.fillStyle=s.fillStyle,R.strokeStyle=s.strokeStyle,x.fillColor=s.fillStyle,x.strokeColor=s.strokeStyle;break;case u.UNCOLORED:const a=o.Util.makeHexColor(L[0],L[1],L[2]);R.fillStyle=a,R.strokeStyle=a,x.fillColor=a,x.strokeColor=a;break;default:throw new o.FormatError(`Unsupported paint type: ${j}`)}}getPattern(p,j,L,R){let x=L;R!==Z.SHADING&&(x=o.Util.transform(x,j.baseTransform),this.matrix&&(x=o.Util.transform(x,this.matrix)));const s=this.createPatternCanvas(j);let a=new DOMMatrix(x);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const C=p.createPattern(s.canvas,"repeat");try{C.setTransform(a)}catch(k){(0,o.warn)(`TilingPattern.getPattern: "${k==null?void 0:k.message}".`)}return C}}A.TilingPattern=E},(et,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GlobalWorkerOptions=void 0;const G=Object.create(null);A.GlobalWorkerOptions=G,G.workerPort=G.workerPort===void 0?null:G.workerPort,G.workerSrc=G.workerSrc===void 0?"":G.workerSrc},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.MessageHandler=void 0;var o=G(1);const Z={UNKNOWN:0,DATA:1,ERROR:2},H={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $(P){switch(P instanceof Error||typeof P=="object"&&P!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),P.name){case"AbortException":return new o.AbortException(P.message);case"MissingPDFException":return new o.MissingPDFException(P.message);case"PasswordException":return new o.PasswordException(P.message,P.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(P.message,P.status);case"UnknownErrorException":return new o.UnknownErrorException(P.message,P.details);default:return new o.UnknownErrorException(P.message,P.toString())}}class U{constructor(e,l,r){this.sourceName=e,this.targetName=l,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=f=>{const u=f.data;if(u.targetName!==this.sourceName)return;if(u.stream){this._processStreamMessage(u);return}if(u.callback){const T=u.callbackId,p=this.callbackCapabilities[T];if(!p)throw new Error(`Cannot resolve callback ${T}`);if(delete this.callbackCapabilities[T],u.callback===Z.DATA)p.resolve(u.data);else if(u.callback===Z.ERROR)p.reject($(u.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[u.action];if(!E)throw new Error(`Unknown action from worker: ${u.action}`);if(u.callbackId){const T=this.sourceName,p=u.sourceName;new Promise(function(j){j(E(u.data))}).then(function(j){r.postMessage({sourceName:T,targetName:p,callback:Z.DATA,callbackId:u.callbackId,data:j})},function(j){r.postMessage({sourceName:T,targetName:p,callback:Z.ERROR,callbackId:u.callbackId,reason:$(j)})});return}if(u.streamId){this._createStreamSink(u);return}E(u.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,l){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=l}send(e,l,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:l},r)}sendWithPromise(e,l,r){const f=this.callbackId++,u=(0,o.createPromiseCapability)();this.callbackCapabilities[f]=u;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:f,data:l},r)}catch(E){u.reject(E)}return u.promise}sendWithStream(e,l,r,f){const u=this.streamId++,E=this.sourceName,T=this.targetName,p=this.comObj;return new ReadableStream({start:j=>{const L=(0,o.createPromiseCapability)();return this.streamControllers[u]={controller:j,startCall:L,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:E,targetName:T,action:e,streamId:u,data:l,desiredSize:j.desiredSize},f),L.promise},pull:j=>{const L=(0,o.createPromiseCapability)();return this.streamControllers[u].pullCall=L,p.postMessage({sourceName:E,targetName:T,stream:H.PULL,streamId:u,desiredSize:j.desiredSize}),L.promise},cancel:j=>{(0,o.assert)(j instanceof Error,"cancel must have a valid reason");const L=(0,o.createPromiseCapability)();return this.streamControllers[u].cancelCall=L,this.streamControllers[u].isClosed=!0,p.postMessage({sourceName:E,targetName:T,stream:H.CANCEL,streamId:u,reason:$(j)}),L.promise}},r)}_createStreamSink(e){const l=e.streamId,r=this.sourceName,f=e.sourceName,u=this.comObj,E=this,T=this.actionHandler[e.action],p={enqueue(j,L=1,R){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=L,x>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),u.postMessage({sourceName:r,targetName:f,stream:H.ENQUEUE,streamId:l,chunk:j},R)},close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:r,targetName:f,stream:H.CLOSE,streamId:l}),delete E.streamSinks[l])},error(j){(0,o.assert)(j instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,u.postMessage({sourceName:r,targetName:f,stream:H.ERROR,streamId:l,reason:$(j)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[l]=p,new Promise(function(j){j(T(e.data,p))}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:H.START_COMPLETE,streamId:l,success:!0})},function(j){u.postMessage({sourceName:r,targetName:f,stream:H.START_COMPLETE,streamId:l,reason:$(j)})})}_processStreamMessage(e){const l=e.streamId,r=this.sourceName,f=e.sourceName,u=this.comObj,E=this.streamControllers[l],T=this.streamSinks[l];switch(e.stream){case H.START_COMPLETE:e.success?E.startCall.resolve():E.startCall.reject($(e.reason));break;case H.PULL_COMPLETE:e.success?E.pullCall.resolve():E.pullCall.reject($(e.reason));break;case H.PULL:if(!T){u.postMessage({sourceName:r,targetName:f,stream:H.PULL_COMPLETE,streamId:l,success:!0});break}T.desiredSize<=0&&e.desiredSize>0&&T.sinkCapability.resolve(),T.desiredSize=e.desiredSize,new Promise(function(p){p(T.onPull&&T.onPull())}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:H.PULL_COMPLETE,streamId:l,success:!0})},function(p){u.postMessage({sourceName:r,targetName:f,stream:H.PULL_COMPLETE,streamId:l,reason:$(p)})});break;case H.ENQUEUE:if((0,o.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(e.chunk);break;case H.CLOSE:if((0,o.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),this._deleteStreamController(E,l);break;case H.ERROR:(0,o.assert)(E,"error should have stream controller"),E.controller.error($(e.reason)),this._deleteStreamController(E,l);break;case H.CANCEL_COMPLETE:e.success?E.cancelCall.resolve():E.cancelCall.reject($(e.reason)),this._deleteStreamController(E,l);break;case H.CANCEL:if(!T)break;new Promise(function(p){p(T.onCancel&&T.onCancel($(e.reason)))}).then(function(){u.postMessage({sourceName:r,targetName:f,stream:H.CANCEL_COMPLETE,streamId:l,success:!0})},function(p){u.postMessage({sourceName:r,targetName:f,stream:H.CANCEL_COMPLETE,streamId:l,reason:$(p)})}),T.sinkCapability.reject($(e.reason)),T.isCancelled=!0,delete this.streamSinks[l];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e,l){await Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]),delete this.streamControllers[l]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}A.MessageHandler=U},(et,A,G)=>{var H,$;Object.defineProperty(A,"__esModule",{value:!0}),A.Metadata=void 0;var o=G(1);class Z{constructor({parsedData:P,rawData:e}){Pt(this,H,void 0);Pt(this,$,void 0);Et(this,H,P),Et(this,$,e)}getRaw(){return pt(this,$)}get(P){var e;return(e=pt(this,H).get(P))!=null?e:null}getAll(){return(0,o.objectFromMap)(pt(this,H))}has(P){return pt(this,H).has(P)}}H=new WeakMap,$=new WeakMap,A.Metadata=Z},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.OptionalContentConfig=void 0;var o=G(1);class Z{constructor(U,P){this.visible=!0,this.name=U,this.intent=P}}class H{constructor(U){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,U!==null){this.name=U.name,this.creator=U.creator,this._order=U.order;for(const P of U.groups)this._groups.set(P.id,new Z(P.name,P.intent));if(U.baseState==="OFF")for(const P of this._groups)P.visible=!1;for(const P of U.on)this._groups.get(P).visible=!0;for(const P of U.off)this._groups.get(P).visible=!1}}_evaluateVisibilityExpression(U){const P=U.length;if(P<2)return!0;const e=U[0];for(let l=1;l<P;l++){const r=U[l];let f;if(Array.isArray(r))f=this._evaluateVisibilityExpression(r);else if(this._groups.has(r))f=this._groups.get(r).visible;else return(0,o.warn)(`Optional content group not found: ${r}`),!0;switch(e){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return e==="And"}isVisible(U){if(this._groups.size===0)return!0;if(!U)return(0,o.warn)("Optional content group not defined."),!0;if(U.type==="OCG")return this._groups.has(U.id)?this._groups.get(U.id).visible:((0,o.warn)(`Optional content group not found: ${U.id}`),!0);if(U.type==="OCMD"){if(U.expression)return this._evaluateVisibilityExpression(U.expression);if(!U.policy||U.policy==="AnyOn"){for(const P of U.ids){if(!this._groups.has(P))return(0,o.warn)(`Optional content group not found: ${P}`),!0;if(this._groups.get(P).visible)return!0}return!1}else if(U.policy==="AllOn"){for(const P of U.ids){if(!this._groups.has(P))return(0,o.warn)(`Optional content group not found: ${P}`),!0;if(!this._groups.get(P).visible)return!1}return!0}else if(U.policy==="AnyOff"){for(const P of U.ids){if(!this._groups.has(P))return(0,o.warn)(`Optional content group not found: ${P}`),!0;if(!this._groups.get(P).visible)return!0}return!1}else if(U.policy==="AllOff"){for(const P of U.ids){if(!this._groups.has(P))return(0,o.warn)(`Optional content group not found: ${P}`),!0;if(this._groups.get(P).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${U.policy}.`),!0}return(0,o.warn)(`Unknown group type ${U.type}.`),!0}setVisibility(U,P=!0){if(!this._groups.has(U)){(0,o.warn)(`Optional content group not found: ${U}`);return}this._groups.get(U).visible=!!P}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,o.objectFromMap)(this._groups):null}getGroup(U){return this._groups.get(U)||null}}A.OptionalContentConfig=H},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFDataTransportStream=void 0;var o=G(1),Z=G(5);class H{constructor(e,l){(0,o.assert)(l,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;const r=e.initialData;if((r==null?void 0:r.length)>0){const f=new Uint8Array(r).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=l,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,u)=>{this._onReceiveData({begin:f,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((f,u)=>{this._onProgress({loaded:f,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const l=new Uint8Array(e.chunk).buffer;if(e.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(l):this._queuedChunks.push(l);else{const r=this._rangeReaders.some(function(f){return f._begin!==e.begin?!1:(f._enqueue(l),!0)});(0,o.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,l;return(l=(e=this._fullRequestReader)==null?void 0:e._loaded)!=null?l:0}_onProgress(e){if(e.total===void 0){const l=this._rangeReaders[0];l!=null&&l.onProgress&&l.onProgress({loaded:e.loaded})}else{const l=this._fullRequestReader;l!=null&&l.onProgress&&l.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const l=this._rangeReaders.indexOf(e);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new $(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,l){if(l<=this._progressiveDataLength)return null;const r=new U(this,e,l);return this._pdfDataRangeTransport.requestDataRange(e,l),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const l of this._rangeReaders.slice(0))l.cancel(e);this._pdfDataRangeTransport.abort()}}A.PDFDataTransportStream=H;class ${constructor(e,l,r=!1,f=null){this._stream=e,this._done=r||!1,this._filename=(0,Z.isPdfFile)(f)?f:null,this._queuedChunks=l||[],this._loaded=0;for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,o.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class U{constructor(e,l,r){this._stream=e,this._begin=l,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,o.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(et,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.XfaText=void 0;class G{static textContent(Z){const H=[],$={items:H,styles:Object.create(null)};function U(P){var r;if(!P)return;let e=null;const l=P.name;if(l==="#text")e=P.value;else if(G.shouldBuildText(l))(r=P==null?void 0:P.attributes)!=null&&r.textContent?e=P.attributes.textContent:P.value&&(e=P.value);else return;if(e!==null&&H.push({str:e}),!!P.children)for(const f of P.children)U(f)}return U(Z),$}static shouldBuildText(Z){return!(Z==="textarea"||Z==="input"||Z==="option"||Z==="select")}}A.XfaText=G},(et,A,G)=>{var b,Vt;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationLayer=void 0;var o=G(1),Z=G(5),H=G(9),$=G(19),U=G(20);const P=1e3,e=new WeakSet;function l(v){return{width:v[2]-v[0],height:v[3]-v[1]}}class r{static create(t){switch(t.data.annotationType){case o.AnnotationType.LINK:return new u(t);case o.AnnotationType.TEXT:return new E(t);case o.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new p(t);case"Btn":return t.data.radioButton?new L(t):t.data.checkBox?new j(t):new R(t);case"Ch":return new x(t)}return new T(t);case o.AnnotationType.POPUP:return new s(t);case o.AnnotationType.FREETEXT:return new C(t);case o.AnnotationType.LINE:return new k(t);case o.AnnotationType.SQUARE:return new y(t);case o.AnnotationType.CIRCLE:return new M(t);case o.AnnotationType.POLYLINE:return new w(t);case o.AnnotationType.CARET:return new V(t);case o.AnnotationType.INK:return new W(t);case o.AnnotationType.POLYGON:return new D(t);case o.AnnotationType.HIGHLIGHT:return new z(t);case o.AnnotationType.UNDERLINE:return new Q(t);case o.AnnotationType.SQUIGGLY:return new K(t);case o.AnnotationType.STRIKEOUT:return new m(t);case o.AnnotationType.STAMP:return new i(t);case o.AnnotationType.FILEATTACHMENT:return new n(t);default:return new f(t)}}}class f{constructor(t,{isRenderable:d=!1,ignoreBorder:g=!1,createQuadrilaterals:_=!1}={}){this.isRenderable=d,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,d&&(this.container=this._createContainer(g)),_&&(this.quadrilaterals=this._createQuadrilaterals(g))}_createContainer(t=!1){const d=this.data,g=this.page,_=this.viewport,c=document.createElement("section");let{width:F,height:O}=l(d.rect);c.setAttribute("data-annotation-id",d.id);const N=o.Util.normalizeRect([d.rect[0],g.view[3]-d.rect[1]+g.view[1],d.rect[2],g.view[3]-d.rect[3]+g.view[1]]);if(d.hasOwnCanvas){const q=_.transform.slice(),[X,J]=o.Util.singularValueDecompose2dScale(q);F=Math.ceil(F*X),O=Math.ceil(O*J),N[0]*=X,N[1]*=J;for(let nt=0;nt<4;nt++)q[nt]=Math.sign(q[nt]);c.style.transform=`matrix(${q.join(",")})`}else c.style.transform=`matrix(${_.transform.join(",")})`;if(c.style.transformOrigin=`${-N[0]}px ${-N[1]}px`,!t&&d.borderStyle.width>0){c.style.borderWidth=`${d.borderStyle.width}px`,d.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE&&(F-=2*d.borderStyle.width,O-=2*d.borderStyle.width);const q=d.borderStyle.horizontalCornerRadius,X=d.borderStyle.verticalCornerRadius;if(q>0||X>0){const nt=`${q}px / ${X}px`;c.style.borderRadius=nt}switch(d.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:c.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:c.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:c.style.borderBottomStyle="solid";break}d.borderColor||d.color||null?c.style.borderColor=o.Util.makeHexColor(d.color[0]|0,d.color[1]|0,d.color[2]|0):c.style.borderWidth=0}return c.style.left=`${N[0]}px`,c.style.top=`${N[1]}px`,d.hasOwnCanvas?c.style.width=c.style.height="auto":(c.style.width=`${F}px`,c.style.height=`${O}px`),c}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const d=[],g=this.data.rect;for(const _ of this.data.quadPoints)this.data.rect=[_[2].x,_[2].y,_[1].x,_[1].y],d.push(this._createContainer(t));return this.data.rect=g,d}_createPopup(t,d){let g=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,g=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.style.height=g.style.height,t.style.width=g.style.width,g.appendChild(t));const c=new a({container:g,trigger:t,color:d.color,titleObj:d.titleObj,modificationDate:d.modificationDate,contentsObj:d.contentsObj,richText:d.richText,hideWrapper:!0}).render();c.style.left=g.style.width,g.appendChild(c)}_renderQuadrilaterals(t){for(const d of this.quadrilaterals)d.className=t;return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,d=null){const g=[];if(this._fieldObjects){const _=this._fieldObjects[t];if(_)for(const{page:c,id:F,exportValues:O}of _){if(c===-1||F===d)continue;const N=typeof O=="string"?O:null,q=document.getElementById(F);if(q&&!e.has(q)){(0,o.warn)(`_getElementsByName - element not allowed: ${F}`);continue}g.push({id:F,exportValue:N,domElement:q})}return g}for(const _ of document.getElementsByName(t)){const{id:c,exportValue:F}=_;c!==d&&(!e.has(_)||g.push({id:c,exportValue:F,domElement:_}))}return g}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,o.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class u extends f{constructor(t,d=null){const g=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));super(t,{isRenderable:g,ignoreBorder:!!(d!=null&&d.ignoreBorder),createQuadrilaterals:!0})}render(){var _;const{data:t,linkService:d}=this,g=document.createElement("a");if(t.url)d.addLinkAttributes||(0,o.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(_=d.addLinkAttributes)==null||_.call(d,g,t.url,t.newWindow);else if(t.action)this._bindNamedAction(g,t.action);else if(t.dest)this._bindLink(g,t.dest);else{let c=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(c=!0,this._bindJSAction(g,t)),t.resetForm?this._bindResetFormAction(g,t.resetForm):c||this._bindLink(g,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((c,F)=>{const O=F===0?g:g.cloneNode();return c.appendChild(O),c}):(this.container.className="linkAnnotation",this.container.appendChild(g),this.container)}_bindLink(t,d){t.href=this.linkService.getDestinationHash(d),t.onclick=()=>(d&&this.linkService.goToDestination(d),!1),(d||d==="")&&(t.className="internalLink")}_bindNamedAction(t,d){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(d),!1),t.className="internalLink"}_bindJSAction(t,d){t.href=this.linkService.getAnchorUrl("");const g=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const _ of Object.keys(d.actions)){const c=g.get(_);!c||(t[c]=()=>{var F;return(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d.id,name:_}}),!1})}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,d){const g=t.onclick;if(g||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),g||(t.onclick=()=>!1);return}t.onclick=()=>{var X;g&&g();const{fields:_,refs:c,include:F}=d,O=[];if(_.length!==0||c.length!==0){const J=new Set(c);for(const nt of _){const tt=this._fieldObjects[nt]||[];for(const{id:st}of tt)J.add(st)}for(const nt of Object.values(this._fieldObjects))for(const tt of nt)J.has(tt.id)===F&&O.push(tt)}else for(const J of Object.values(this._fieldObjects))O.push(...J);const N=this.annotationStorage,q=[];for(const J of O){const{id:nt}=J;switch(q.push(nt),J.type){case"text":{const st=J.defaultValue||"";N.setValue(nt,{value:st,valueAsString:st});break}case"checkbox":case"radiobutton":{const st=J.defaultValue===J.exportValues;N.setValue(nt,{value:st});break}case"combobox":case"listbox":{const st=J.defaultValue||"";N.setValue(nt,{value:st});break}default:continue}const tt=document.getElementById(nt);!tt||!e.has(tt)||tt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:q,name:"ResetForm"}})),!1}}}class E extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class T extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:d,isMac:g}=f.platform;return d&&t.ctrlKey||g&&t.metaKey}_setEventListener(t,d,g,_){d.includes("mouse")?t.addEventListener(d,c=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:g,value:_(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(d,c=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:g,value:_(c)}})})}_setEventListeners(t,d,g){var _;for(const[c,F]of d)(F==="Action"||((_=this.data.actions)==null?void 0:_[F]))&&this._setEventListener(t,c,F,g)}_setBackgroundColor(t){const d=this.data.backgroundColor||null;t.style.backgroundColor=d===null?"transparent":o.Util.makeHexColor(d[0],d[1],d[2])}_dispatchEventFromSandbox(t,d){const g=(c,F,O)=>{const N=O.detail[c];O.target.style[F]=$.ColorConverters[`${N[0]}_HTML`](N.slice(1))},_={display:c=>{const F=c.detail.display%2===1;c.target.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F,print:c.detail.display===0||c.detail.display===3})},print:c=>{this.annotationStorage.setValue(this.data.id,{print:c.detail.print})},hidden:c=>{c.target.style.visibility=c.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:c.detail.hidden})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.detail.readonly?c.target.setAttribute("readonly",""):c.target.removeAttribute("readonly")},required:c=>{c.detail.required?c.target.setAttribute("required",""):c.target.removeAttribute("required")},bgColor:c=>{g("bgColor","backgroundColor",c)},fillColor:c=>{g("fillColor","backgroundColor",c)},fgColor:c=>{g("fgColor","color",c)},textColor:c=>{g("textColor","color",c)},borderColor:c=>{g("borderColor","borderColor",c)},strokeColor:c=>{g("strokeColor","borderColor",c)}};for(const c of Object.keys(d.detail)){const F=t[c]||_[c];F&&F(d)}}}class p extends T{constructor(t){const d=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:d})}setPropertyOnSiblings(t,d,g,_){const c=this.annotationStorage;for(const F of this._getElementsByName(t.name,t.id))F.domElement&&(F.domElement[d]=g),c.setValue(F.id,{[_]:g})}render(){var _;const t=this.annotationStorage,d=this.data.id;this.container.className="textWidgetAnnotation";let g=null;if(this.renderForms){const c=t.getValue(d,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),F=c.valueAsString||c.value||"",O={userValue:null,formattedValue:null};this.data.multiLine?(g=document.createElement("textarea"),g.textContent=F):(g=document.createElement("input"),g.type="text",g.setAttribute("value",F)),e.add(g),g.disabled=this.data.readOnly,g.name=this.data.fieldName,g.tabIndex=P,O.userValue=F,g.setAttribute("id",d),g.addEventListener("input",q=>{t.setValue(d,{value:q.target.value}),this.setPropertyOnSiblings(g,"value",q.target.value,"value")}),g.addEventListener("resetform",q=>{const X=this.data.defaultFieldValue||"";g.value=O.userValue=X,delete O.formattedValue});let N=q=>{O.formattedValue&&(q.target.value=O.formattedValue),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){g.addEventListener("focus",X=>{O.userValue&&(X.target.value=O.userValue)}),g.addEventListener("updatefromsandbox",X=>{const J={value(nt){O.userValue=nt.detail.value||"",t.setValue(d,{value:O.userValue.toString()}),O.formattedValue||(nt.target.value=O.userValue)},valueAsString(nt){O.formattedValue=nt.detail.valueAsString||"",nt.target!==document.activeElement&&(nt.target.value=O.formattedValue),t.setValue(d,{formattedValue:O.formattedValue})},selRange(nt){const[tt,st]=nt.detail.selRange;tt>=0&&st<nt.target.value.length&&nt.target.setSelectionRange(tt,st)}};this._dispatchEventFromSandbox(J,X)}),g.addEventListener("keydown",X=>{var nt;let J=-1;X.key==="Escape"?J=0:X.key==="Enter"?J=2:X.key==="Tab"&&(J=3),J!==-1&&(O.userValue=X.target.value,(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:X.target.value,willCommit:!0,commitKey:J,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}))});const q=N;N=null,g.addEventListener("blur",X=>{var J;O.userValue=X.target.value,this._mouseState.isDown&&((J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:X.target.value,willCommit:!0,commitKey:1,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}})),q(X)}),(_=this.data.actions)!=null&&_.Keystroke&&g.addEventListener("beforeinput",X=>{var it;O.formattedValue="";const{data:J,target:nt}=X,{value:tt,selectionStart:st,selectionEnd:lt}=nt;(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:tt,change:J,willCommit:!1,selStart:st,selEnd:lt}})}),this._setEventListeners(g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.value)}if(N&&g.addEventListener("blur",N),this.data.maxLen!==null&&(g.maxLength=this.data.maxLen),this.data.comb){const X=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;g.classList.add("comb"),g.style.letterSpacing=`calc(${X}px - 1ch)`}}else g=document.createElement("div"),g.textContent=this.data.fieldValue,g.style.verticalAlign="middle",g.style.display="table-cell";return this._setTextStyle(g),this._setBackgroundColor(g),this.container.appendChild(g),this.container}_setTextStyle(t){const d=["left","center","right"],{fontSize:g,fontColor:_}=this.data.defaultAppearanceData,c=t.style;g&&(c.fontSize=`${g}px`),c.color=o.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(c.textAlign=d[this.data.textAlignment])}}class j extends T{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,d=this.data,g=d.id;let _=t.getValue(g,{value:d.exportValue===d.fieldValue}).value;typeof _=="string"&&(_=_!=="Off",t.setValue(g,{value:_})),this.container.className="buttonWidgetAnnotation checkBox";const c=document.createElement("input");return e.add(c),c.disabled=d.readOnly,c.type="checkbox",c.name=d.fieldName,_&&c.setAttribute("checked",!0),c.setAttribute("id",g),c.setAttribute("exportValue",d.exportValue),c.tabIndex=P,c.addEventListener("change",F=>{const{name:O,checked:N}=F.target;for(const q of this._getElementsByName(O,g)){const X=N&&q.exportValue===d.exportValue;q.domElement&&(q.domElement.checked=X),t.setValue(q.id,{value:X})}t.setValue(g,{value:N})}),c.addEventListener("resetform",F=>{const O=d.defaultFieldValue||"Off";F.target.checked=O===d.exportValue}),this.enableScripting&&this.hasJSActions&&(c.addEventListener("updatefromsandbox",F=>{const O={value(N){N.target.checked=N.detail.value!=="Off",t.setValue(g,{value:N.target.checked})}};this._dispatchEventFromSandbox(O,F)}),this._setEventListeners(c,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],F=>F.target.checked)),this._setBackgroundColor(c),this.container.appendChild(c),this.container}}class L extends T{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,d=this.data,g=d.id;let _=t.getValue(g,{value:d.fieldValue===d.buttonValue}).value;typeof _=="string"&&(_=_!==d.buttonValue,t.setValue(g,{value:_}));const c=document.createElement("input");if(e.add(c),c.disabled=d.readOnly,c.type="radio",c.name=d.fieldName,_&&c.setAttribute("checked",!0),c.setAttribute("id",g),c.tabIndex=P,c.addEventListener("change",F=>{const{name:O,checked:N}=F.target;for(const q of this._getElementsByName(O,g))t.setValue(q.id,{value:!1});t.setValue(g,{value:N})}),c.addEventListener("resetform",F=>{const O=d.defaultFieldValue;F.target.checked=O!=null&&O===d.buttonValue}),this.enableScripting&&this.hasJSActions){const F=d.buttonValue;c.addEventListener("updatefromsandbox",O=>{const N={value:q=>{const X=F===q.detail.value;for(const J of this._getElementsByName(q.target.name)){const nt=X&&J.id===g;J.domElement&&(J.domElement.checked=nt),t.setValue(J.id,{value:nt})}}};this._dispatchEventFromSandbox(N,O)}),this._setEventListeners(c,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],O=>O.target.checked)}return this._setBackgroundColor(c),this.container.appendChild(c),this.container}}class R extends u{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),t}}class x extends T{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,d=this.data.id;t.getValue(d,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:g}=this.data.defaultAppearanceData;g||(g=9);const _=`calc(${g}px * var(--zoom-factor))`,c=document.createElement("select");e.add(c),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.setAttribute("id",d),c.tabIndex=P,c.style.fontSize=`${g}px`,this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",N=>{const q=this.data.defaultFieldValue;for(const X of c.options)X.selected=X.value===q});for(const N of this.data.options){const q=document.createElement("option");q.textContent=N.displayValue,q.value=N.exportValue,this.data.combo&&(q.style.fontSize=_),this.data.fieldValue.includes(N.exportValue)&&q.setAttribute("selected",!0),c.appendChild(q)}const F=(N,q)=>{const X=q?"value":"textContent",J=N.target.options;return N.target.multiple?Array.prototype.filter.call(J,nt=>nt.selected).map(nt=>nt[X]):J.selectedIndex===-1?null:J[J.selectedIndex][X]},O=N=>{const q=N.target.options;return Array.prototype.map.call(q,X=>({displayValue:X.textContent,exportValue:X.value}))};return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",N=>{const q={value(X){const J=X.detail.value,nt=new Set(Array.isArray(J)?J:[J]);for(const tt of c.options)tt.selected=nt.has(tt.value);t.setValue(d,{value:F(X,!0)})},multipleSelection(X){c.multiple=!0},remove(X){const J=c.options,nt=X.detail.remove;J[nt].selected=!1,c.remove(nt),J.length>0&&Array.prototype.findIndex.call(J,st=>st.selected)===-1&&(J[0].selected=!0),t.setValue(d,{value:F(X,!0),items:O(X)})},clear(X){for(;c.length!==0;)c.remove(0);t.setValue(d,{value:null,items:[]})},insert(X){const{index:J,displayValue:nt,exportValue:tt}=X.detail.insert,st=document.createElement("option");st.textContent=nt,st.value=tt,c.insertBefore(st,c.children[J]),t.setValue(d,{value:F(X,!0),items:O(X)})},items(X){const{items:J}=X.detail;for(;c.length!==0;)c.remove(0);for(const nt of J){const{displayValue:tt,exportValue:st}=nt,lt=document.createElement("option");lt.textContent=tt,lt.value=st,c.appendChild(lt)}c.options.length>0&&(c.options[0].selected=!0),t.setValue(d,{value:F(X,!0),items:O(X)})},indices(X){const J=new Set(X.detail.indices);for(const nt of X.target.options)nt.selected=J.has(nt.index);t.setValue(d,{value:F(X,!0)})},editable(X){X.target.disabled=!X.detail.editable}};this._dispatchEventFromSandbox(q,N)}),c.addEventListener("input",N=>{var J;const q=F(N,!0),X=F(N,!1);t.setValue(d,{value:q}),(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:X,changeEx:q,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],N=>N.target.checked)):c.addEventListener("input",function(N){t.setValue(d,{value:F(N)})}),this._setBackgroundColor(c),this.container.appendChild(c),this.container}}class s extends f{constructor(t){var g,_,c;const d=!!(((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d})}render(){const t=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",t.includes(this.data.parentType))return this.container;const d=`[data-annotation-id="${this.data.parentId}"]`,g=this.layer.querySelectorAll(d);if(g.length===0)return this.container;const _=new a({container:this.container,trigger:Array.from(g),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),c=this.page,F=o.Util.normalizeRect([this.data.parentRect[0],c.view[3]-this.data.parentRect[1]+c.view[1],this.data.parentRect[2],c.view[3]-this.data.parentRect[3]+c.view[1]]),O=F[0]+this.data.parentRect[2]-this.data.parentRect[0],N=F[1];return this.container.style.transformOrigin=`${-O}px ${-N}px`,this.container.style.left=`${O}px`,this.container.style.top=`${N}px`,this.container.appendChild(_.render()),this.container}}class a{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var O,N;const d=document.createElement("div");d.className="popupWrapper",this.hideElement=this.hideWrapper?d:this.container,this.hideElement.hidden=!0;const g=document.createElement("div");g.className="popup";const _=this.color;if(_){const q=.7*(255-_[0])+_[0],X=.7*(255-_[1])+_[1],J=.7*(255-_[2])+_[2];g.style.backgroundColor=o.Util.makeHexColor(q|0,X|0,J|0)}const c=document.createElement("h1");c.dir=this.titleObj.dir,c.textContent=this.titleObj.str,g.appendChild(c);const F=Z.PDFDateString.toDateObject(this.modificationDate);if(F){const q=document.createElement("span");q.className="popupDate",q.textContent="{{date}}, {{time}}",q.dataset.l10nId="annotation_date_string",q.dataset.l10nArgs=JSON.stringify({date:F.toLocaleDateString(),time:F.toLocaleTimeString()}),g.appendChild(q)}if(((O=this.richText)==null?void 0:O.str)&&(!((N=this.contentsObj)!=null&&N.str)||this.contentsObj.str===this.richText.str))U.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:g}),g.lastChild.className="richText popupContent";else{const q=this._formatContents(this.contentsObj);g.appendChild(q)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const q of this.trigger)q.addEventListener("click",this._toggle.bind(this)),q.addEventListener("mouseover",this._show.bind(this,!1)),q.addEventListener("mouseout",this._hide.bind(this,!1));return g.addEventListener("click",this._hide.bind(this,!0)),d.appendChild(g),d}_formatContents({str:t,dir:d}){const g=document.createElement("p");g.className="popupContent",g.dir=d;const _=t.split(/(?:\r\n?|\n)/);for(let c=0,F=_.length;c<F;++c){const O=_[c];g.appendChild(document.createTextNode(O)),c<F-1&&g.appendChild(document.createElement("br"))}return g}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class C extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:d,height:g}=l(t.rect),_=this.svgFactory.create(d,g),c=this.svgFactory.createElement("svg:line");return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),_.appendChild(c),this.container.append(_),this._createPopup(c,t),this.container}}class y extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:d,height:g}=l(t.rect),_=this.svgFactory.create(d,g),c=t.borderStyle.width,F=this.svgFactory.createElement("svg:rect");return F.setAttribute("x",c/2),F.setAttribute("y",c/2),F.setAttribute("width",d-c),F.setAttribute("height",g-c),F.setAttribute("stroke-width",c||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),_.appendChild(F),this.container.append(_),this._createPopup(F,t),this.container}}class M extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:d,height:g}=l(t.rect),_=this.svgFactory.create(d,g),c=t.borderStyle.width,F=this.svgFactory.createElement("svg:ellipse");return F.setAttribute("cx",d/2),F.setAttribute("cy",g/2),F.setAttribute("rx",d/2-c/2),F.setAttribute("ry",g/2-c/2),F.setAttribute("stroke-width",c||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),_.appendChild(F),this.container.append(_),this._createPopup(F,t),this.container}}class w extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:d,height:g}=l(t.rect),_=this.svgFactory.create(d,g);let c=[];for(const O of t.vertices){const N=O.x-t.rect[0],q=t.rect[3]-O.y;c.push(N+","+q)}c=c.join(" ");const F=this.svgFactory.createElement(this.svgElementName);return F.setAttribute("points",c),F.setAttribute("stroke-width",t.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),_.appendChild(F),this.container.append(_),this._createPopup(F,t),this.container}}class D extends w{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class W extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:d,height:g}=l(t.rect),_=this.svgFactory.create(d,g);for(const c of t.inkLists){let F=[];for(const N of c){const q=N.x-t.rect[0],X=t.rect[3]-N.y;F.push(`${q},${X}`)}F=F.join(" ");const O=this.svgFactory.createElement(this.svgElementName);O.setAttribute("points",F),O.setAttribute("stroke-width",t.borderStyle.width||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),this._createPopup(O,t),_.appendChild(O)}return this.container.append(_),this.container}}class z extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Q extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class K extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class m extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class i extends f{constructor(t){var g,_,c;const d=!!(t.data.hasPopup||((g=t.data.titleObj)==null?void 0:g.str)||((_=t.data.contentsObj)==null?void 0:_.str)||((c=t.data.richText)==null?void 0:c.str));super(t,{isRenderable:d,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class n extends f{constructor(t){var _;super(t,{isRenderable:!0});const{filename:d,content:g}=this.data.file;this.filename=(0,Z.getFilenameFromUrl)(d),this.content=g,(_=this.linkService.eventBus)==null||_.dispatch("fileattachmentannotation",{source:this,id:(0,o.stringToPDFString)(d),filename:d,content:g})}render(){var d,g;this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((d=this.data.titleObj)==null?void 0:d.str)||((g=this.data.contentsObj)==null?void 0:g.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}class h{static render(t){const d=[],g=[];for(const c of t.annotations){if(!c)continue;const{width:F,height:O}=l(c.rect);if(!(F<=0||O<=0)){if(c.annotationType===o.AnnotationType.POPUP){g.push(c);continue}d.push(c)}}g.length&&d.push(...g);const _=t.div;for(const c of d){const F=r.create({data:c,layer:_,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Z.DOMSVGFactory,annotationStorage:t.annotationStorage||new H.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(F.isRenderable){const O=F.render();if(c.hidden&&(O.style.visibility="hidden"),Array.isArray(O))for(const N of O)_.appendChild(N);else F instanceof s?_.prepend(O):_.appendChild(O)}}Dt(this,b,Vt).call(this,_,t.annotationCanvasMap)}static update(t){const{page:d,viewport:g,annotations:_,annotationCanvasMap:c,div:F}=t,O=g.transform,N=`matrix(${O.join(",")})`;let q,X;for(const J of _){const nt=F.querySelectorAll(`[data-annotation-id="${J.id}"]`);if(nt)for(const tt of nt)if(J.hasOwnCanvas){const st=o.Util.normalizeRect([J.rect[0],d.view[3]-J.rect[1]+d.view[1],J.rect[2],d.view[3]-J.rect[3]+d.view[1]]);if(!X){q=Math.abs(O[0]||O[1]);const ot=O.slice();for(let ct=0;ct<4;ct++)ot[ct]=Math.sign(ot[ct]);X=`matrix(${ot.join(",")})`}const lt=st[0]*q,it=st[1]*q;tt.style.left=`${lt}px`,tt.style.top=`${it}px`,tt.style.transformOrigin=`${-lt}px ${-it}px`,tt.style.transform=X}else tt.style.transform=N}Dt(this,b,Vt).call(this,F,c),F.hidden=!1}}b=new WeakSet,Vt=function(t,d){if(!!d){for(const[g,_]of d){const c=t.querySelector(`[data-annotation-id="${g}"]`);if(!c)continue;const{firstChild:F}=c;F.nodeName==="CANVAS"?c.replaceChild(_,F):c.insertBefore(_,F)}d.clear()}},Pt(h,b),A.AnnotationLayer=h},(et,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ColorConverters=void 0;function G(Z){return Math.floor(Math.max(0,Math.min(1,Z))*255).toString(16).padStart(2,"0")}class o{static CMYK_G([H,$,U,P]){return["G",1-Math.min(1,.3*H+.59*U+.11*$+P)]}static G_CMYK([H]){return["CMYK",0,0,0,1-H]}static G_RGB([H]){return["RGB",H,H,H]}static G_HTML([H]){const $=G(H);return`#${$}${$}${$}`}static RGB_G([H,$,U]){return["G",.3*H+.59*$+.11*U]}static RGB_HTML([H,$,U]){const P=G(H),e=G($),l=G(U);return`#${P}${e}${l}`}static T_HTML(){return"#00000000"}static CMYK_RGB([H,$,U,P]){return["RGB",1-Math.min(1,H+P),1-Math.min(1,U+P),1-Math.min(1,$+P)]}static CMYK_HTML(H){return this.RGB_HTML(this.CMYK_RGB(H))}static RGB_CMYK([H,$,U]){const P=1-H,e=1-$,l=1-U,r=Math.min(P,e,l);return["CMYK",P,e,l,r]}}A.ColorConverters=o},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.XfaLayer=void 0;var o=G(1),Z=G(17);class H{static setupStorage(U,P,e,l,r){const f=l.getValue(P,{value:null});switch(e.name){case"textarea":if(f.value!==null&&(U.textContent=f.value),r==="print")break;U.addEventListener("input",u=>{l.setValue(P,{value:u.target.value})});break;case"input":if(e.attributes.type==="radio"||e.attributes.type==="checkbox"){if(f.value===e.attributes.xfaOn?U.setAttribute("checked",!0):f.value===e.attributes.xfaOff&&U.removeAttribute("checked"),r==="print")break;U.addEventListener("change",u=>{l.setValue(P,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(f.value!==null&&U.setAttribute("value",f.value),r==="print")break;U.addEventListener("input",u=>{l.setValue(P,{value:u.target.value})})}break;case"select":if(f.value!==null)for(const u of e.children)u.attributes.value===f.value&&(u.attributes.selected=!0);U.addEventListener("input",u=>{const E=u.target.options,T=E.selectedIndex===-1?"":E[E.selectedIndex].value;l.setValue(P,{value:T})});break}}static setAttributes({html:U,element:P,storage:e=null,intent:l,linkService:r}){var E;const{attributes:f}=P,u=U instanceof HTMLAnchorElement;f.type==="radio"&&(f.name=`${f.name}-${l}`);for(const[T,p]of Object.entries(f))if(!(p==null||T==="dataId"))if(T!=="style")if(T==="textContent")U.textContent=p;else if(T==="class")p.length&&U.setAttribute(T,p.join(" "));else{if(u&&(T==="href"||T==="newWindow"))continue;U.setAttribute(T,p)}else Object.assign(U.style,p);u&&(r.addLinkAttributes||(0,o.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(E=r.addLinkAttributes)==null||E.call(r,U,f.href,f.newWindow)),e&&f.dataId&&this.setupStorage(U,f.dataId,P,e)}static render(U){var p;const P=U.annotationStorage,e=U.linkService,l=U.xfaHtml,r=U.intent||"display",f=document.createElement(l.name);l.attributes&&this.setAttributes({html:f,element:l,intent:r,linkService:e});const u=[[l,-1,f]],E=U.div;if(E.appendChild(f),U.viewport){const j=`matrix(${U.viewport.transform.join(",")})`;E.style.transform=j}r!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const T=[];for(;u.length>0;){const[j,L,R]=u[u.length-1];if(L+1===j.children.length){u.pop();continue}const x=j.children[++u[u.length-1][1]];if(x===null)continue;const{name:s}=x;if(s==="#text"){const C=document.createTextNode(x.value);T.push(C),R.appendChild(C);continue}let a;if((p=x==null?void 0:x.attributes)!=null&&p.xmlns?a=document.createElementNS(x.attributes.xmlns,s):a=document.createElement(s),R.appendChild(a),x.attributes&&this.setAttributes({html:a,element:x,storage:P,intent:r,linkService:e}),x.children&&x.children.length>0)u.push([x,-1,a]);else if(x.value){const C=document.createTextNode(x.value);Z.XfaText.shouldBuildText(s)&&T.push(C),a.appendChild(C)}}for(const j of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))j.setAttribute("readOnly",!0);return{textDivs:T}}static update(U){const P=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=P,U.div.hidden=!1}}A.XfaLayer=H},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.renderTextLayer=j;var o=G(1);const Z=1e5,H=30,$=.8,U=new Map,P=/^\s+$/g;function e(L,R){const x=U.get(L);if(x)return x;R.save(),R.font=`${H}px ${L}`;const s=R.measureText("");let a=s.fontBoundingBoxAscent,C=Math.abs(s.fontBoundingBoxDescent);if(a){R.restore();const y=a/(a+C);return U.set(L,y),y}R.strokeStyle="red",R.clearRect(0,0,H,H),R.strokeText("g",0,0);let k=R.getImageData(0,0,H,H).data;C=0;for(let y=k.length-1-3;y>=0;y-=4)if(k[y]>0){C=Math.ceil(y/4/H);break}R.clearRect(0,0,H,H),R.strokeText("A",0,H),k=R.getImageData(0,0,H,H).data,a=0;for(let y=0,M=k.length;y<M;y+=4)if(k[y]>0){a=H-Math.floor(y/4/H);break}if(R.restore(),a){const y=a/(a+C);return U.set(L,y),y}return U.set(L,$),$}function l(L,R,x,s){const a=document.createElement("span"),C=L._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL};L._textDivs.push(a);const k=o.Util.transform(L._viewport.transform,R.transform);let y=Math.atan2(k[1],k[0]);const M=x[R.fontName];M.vertical&&(y+=Math.PI/2);const w=Math.hypot(k[2],k[3]),D=w*e(M.fontFamily,s);let V,W;y===0?(V=k[4],W=k[5]-D):(V=k[4]+D*Math.sin(y),W=k[5]-D*Math.cos(y)),a.style.left=`${V}px`,a.style.top=`${W}px`,a.style.fontSize=`${w}px`,a.style.fontFamily=M.fontFamily,a.setAttribute("role","presentation"),a.textContent=R.str,a.dir=R.dir,L._fontInspectorEnabled&&(a.dataset.fontName=R.fontName),y!==0&&(C.angle=y*(180/Math.PI));let z=!1;if(R.str.length>1||L._enhanceTextSelection&&P.test(R.str))z=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const Q=Math.abs(R.transform[0]),K=Math.abs(R.transform[3]);Q!==K&&Math.max(Q,K)/Math.min(Q,K)>1.5&&(z=!0)}if(z&&(M.vertical?C.canvasWidth=R.height*L._viewport.scale:C.canvasWidth=R.width*L._viewport.scale),L._textDivProperties.set(a,C),L._textContentStream&&L._layoutText(a),L._enhanceTextSelection&&C.hasText){let Q=1,K=0;y!==0&&(Q=Math.cos(y),K=Math.sin(y));const m=(M.vertical?R.height:R.width)*L._viewport.scale,i=w;let n,h;y!==0?(n=[Q,K,-K,Q,V,W],h=o.Util.getAxialAlignedBoundingBox([0,0,m,i],n)):h=[V,W,V+m,W+i],L._bounds.push({left:h[0],top:h[1],right:h[2],bottom:h[3],div:a,size:[m,i],m:n})}}function r(L){if(L._canceled)return;const R=L._textDivs,x=L._capability,s=R.length;if(s>Z){L._renderingDone=!0,x.resolve();return}if(!L._textContentStream)for(let a=0;a<s;a++)L._layoutText(R[a]);L._renderingDone=!0,x.resolve()}function f(L,R,x){let s=0;for(let a=0;a<x;a++){const C=L[R++];C>0&&(s=s?Math.min(C,s):C)}return s}function u(L){const R=L._bounds,x=L._viewport,s=E(x.width,x.height,R);for(let a=0;a<s.length;a++){const C=R[a].div,k=L._textDivProperties.get(C);if(k.angle===0){k.paddingLeft=R[a].left-s[a].left,k.paddingTop=R[a].top-s[a].top,k.paddingRight=s[a].right-R[a].right,k.paddingBottom=s[a].bottom-R[a].bottom,L._textDivProperties.set(C,k);continue}const y=s[a],M=R[a],w=M.m,D=w[0],V=w[1],W=[[0,0],[0,M.size[1]],[M.size[0],0],M.size],z=new Float64Array(64);for(let K=0,m=W.length;K<m;K++){const i=o.Util.applyTransform(W[K],w);z[K+0]=D&&(y.left-i[0])/D,z[K+4]=V&&(y.top-i[1])/V,z[K+8]=D&&(y.right-i[0])/D,z[K+12]=V&&(y.bottom-i[1])/V,z[K+16]=V&&(y.left-i[0])/-V,z[K+20]=D&&(y.top-i[1])/D,z[K+24]=V&&(y.right-i[0])/-V,z[K+28]=D&&(y.bottom-i[1])/D,z[K+32]=D&&(y.left-i[0])/-D,z[K+36]=V&&(y.top-i[1])/-V,z[K+40]=D&&(y.right-i[0])/-D,z[K+44]=V&&(y.bottom-i[1])/-V,z[K+48]=V&&(y.left-i[0])/V,z[K+52]=D&&(y.top-i[1])/-D,z[K+56]=V&&(y.right-i[0])/V,z[K+60]=D&&(y.bottom-i[1])/-D}const Q=1+Math.min(Math.abs(D),Math.abs(V));k.paddingLeft=f(z,32,16)/Q,k.paddingTop=f(z,48,16)/Q,k.paddingRight=f(z,0,16)/Q,k.paddingBottom=f(z,16,16)/Q,L._textDivProperties.set(C,k)}}function E(L,R,x){const s=x.map(function(C,k){return{x1:C.left,y1:C.top,x2:C.right,y2:C.bottom,index:k,x1New:void 0,x2New:void 0}});T(L,s);const a=new Array(x.length);for(const C of s){const k=C.index;a[k]={left:C.x1New,top:0,right:C.x2New,bottom:0}}x.map(function(C,k){const y=a[k],M=s[k];M.x1=C.top,M.y1=L-y.right,M.x2=C.bottom,M.y2=L-y.left,M.index=k,M.x1New=void 0,M.x2New=void 0}),T(R,s);for(const C of s){const k=C.index;a[k].top=C.x1New,a[k].bottom=C.x2New}return a}function T(L,R){R.sort(function(a,C){return a.x1-C.x1||a.index-C.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const a of R){let C=0;for(;C<s.length&&s[C].end<=a.y1;)C++;let k=s.length-1;for(;k>=0&&s[k].start>=a.y2;)k--;let y,M,w,D,V=-1/0;for(w=C;w<=k;w++){y=s[w],M=y.boundary;let Q;M.x2>a.x1?Q=M.index>a.index?M.x1New:a.x1:M.x2New===void 0?Q=(M.x2+a.x1)/2:Q=M.x2New,Q>V&&(V=Q)}for(a.x1New=V,w=C;w<=k;w++)y=s[w],M=y.boundary,M.x2New===void 0?M.x2>a.x1?M.index>a.index&&(M.x2New=M.x2):M.x2New=V:M.x2New>V&&(M.x2New=Math.max(V,M.x2));const W=[];let z=null;for(w=C;w<=k;w++){y=s[w],M=y.boundary;const Q=M.x2>a.x2?M:a;z===Q?W[W.length-1].end=y.end:(W.push({start:y.start,end:y.end,boundary:Q}),z=Q)}for(s[C].start<a.y1&&(W[0].start=a.y1,W.unshift({start:s[C].start,end:a.y1,boundary:s[C].boundary})),a.y2<s[k].end&&(W[W.length-1].end=a.y2,W.push({start:a.y2,end:s[k].end,boundary:s[k].boundary})),w=C;w<=k;w++){if(y=s[w],M=y.boundary,M.x2New!==void 0)continue;let Q=!1;for(D=C-1;!Q&&D>=0&&s[D].start>=M.y1;D--)Q=s[D].boundary===M;for(D=k+1;!Q&&D<s.length&&s[D].end<=M.y2;D++)Q=s[D].boundary===M;for(D=0;!Q&&D<W.length;D++)Q=W[D].boundary===M;Q||(M.x2New=V)}Array.prototype.splice.apply(s,[C,k-C+1].concat(W))}for(const a of s){const C=a.boundary;C.x2New===void 0&&(C.x2New=Math.max(L,C.x2))}}class p{constructor({textContent:R,textContentStream:x,container:s,viewport:a,textDivs:C,textContentItemsStr:k,enhanceTextSelection:y}){var M;this._textContent=R,this._textContentStream=x,this._container=s,this._document=s.ownerDocument,this._viewport=a,this._textDivs=C||[],this._textContentItemsStr=k||[],this._enhanceTextSelection=!!y,this._fontInspectorEnabled=!!((M=globalThis.FontInspector)!=null&&M.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(R,x){for(let s=0,a=R.length;s<a;s++){if(R[s].str===void 0){if(R[s].type==="beginMarkedContentProps"||R[s].type==="beginMarkedContent"){const C=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R[s].id!==null&&this._container.setAttribute("id",`${R[s].id}`),C.appendChild(this._container)}else R[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R[s].str),l(this,R[s],x,this._layoutTextCtx)}}_layoutText(R){const x=this._textDivProperties.get(R);let s="";if(x.canvasWidth!==0&&x.hasText){const{fontSize:a,fontFamily:C}=R.style;(a!==this._layoutTextLastFontSize||C!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${a} ${C}`,this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=C);const{width:k}=this._layoutTextCtx.measureText(R.textContent);if(k>0){const y=x.canvasWidth/k;this._enhanceTextSelection&&(x.scale=y),s=`scaleX(${y})`}}if(x.angle!==0&&(s=`rotate(${x.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(x.originalTransform=s),R.style.transform=s),x.hasText&&this._container.appendChild(R),x.hasEOL){const a=document.createElement("br");a.setAttribute("role","presentation"),this._container.appendChild(a)}}_render(R=0){const x=(0,o.createPromiseCapability)();let s=Object.create(null);const a=this._document.createElement("canvas");if(a.height=a.width=H,a.mozOpaque=!0,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){const C=this._textContent.items,k=this._textContent.styles;this._processItems(C,k),x.resolve()}else if(this._textContentStream){const C=()=>{this._reader.read().then(({value:k,done:y})=>{if(y){x.resolve();return}Object.assign(s,k.styles),this._processItems(k.items,s),C()},x.reject)};this._reader=this._textContentStream.getReader(),C()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');x.promise.then(()=>{s=null,R?this._renderTimer=setTimeout(()=>{r(this),this._renderTimer=null},R):r(this)},this._capability.reject)}expandTextDivs(R=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(u(this),this._bounds=null);const x=[],s=[];for(let a=0,C=this._textDivs.length;a<C;a++){const k=this._textDivs[a],y=this._textDivProperties.get(k);!y.hasText||(R?(x.length=0,s.length=0,y.originalTransform&&x.push(y.originalTransform),y.paddingTop>0?(s.push(`${y.paddingTop}px`),x.push(`translateY(${-y.paddingTop}px)`)):s.push(0),y.paddingRight>0?s.push(`${y.paddingRight/y.scale}px`):s.push(0),y.paddingBottom>0?s.push(`${y.paddingBottom}px`):s.push(0),y.paddingLeft>0?(s.push(`${y.paddingLeft/y.scale}px`),x.push(`translateX(${-y.paddingLeft/y.scale}px)`)):s.push(0),k.style.padding=s.join(" "),x.length&&(k.style.transform=x.join(" "))):(k.style.padding=null,k.style.transform=y.originalTransform))}}}function j(L){const R=new p({textContent:L.textContent,textContentStream:L.textContentStream,container:L.container,viewport:L.viewport,textDivs:L.textDivs,textContentItemsStr:L.textContentItemsStr,enhanceTextSelection:L.enhanceTextSelection});return R._render(L.timeout),R}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.SVGGraphics=void 0;var o=G(1),Z=G(5),H=G(3);let $=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};A.SVGGraphics=$;{let T=function(s){let a=[];const C=[];for(const k of s){if(k.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),C.push(a),a=a[a.length-1].items;continue}k.fn==="restore"?a=C.pop():a.push(k)}return a},p=function(s){if(Number.isInteger(s))return s.toString();const a=s.toFixed(10);let C=a.length-1;if(a[C]!=="0")return a;do C--;while(a[C]==="0");return a.substring(0,a[C]==="."?C:C+1)},j=function(s){if(s[4]===0&&s[5]===0){if(s[1]===0&&s[2]===0)return s[0]===1&&s[3]===1?"":`scale(${p(s[0])} ${p(s[3])})`;if(s[0]===s[3]&&s[1]===-s[2]){const a=Math.acos(s[0])*180/Math.PI;return`rotate(${p(a)})`}}else if(s[0]===1&&s[1]===0&&s[2]===0&&s[3]===1)return`translate(${p(s[4])} ${p(s[5])})`;return`matrix(${p(s[0])} ${p(s[1])} ${p(s[2])} ${p(s[3])} ${p(s[4])} ${p(s[5])})`};const U={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},P="http://www.w3.org/XML/1998/namespace",e="http://www.w3.org/1999/xlink",l=["butt","round","square"],r=["miter","round","bevel"],f=function(s,a="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([s],{type:a}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${a};base64,`;for(let M=0,w=s.length;M<w;M+=3){const D=s[M]&255,V=s[M+1]&255,W=s[M+2]&255,z=D>>2,Q=(D&3)<<4|V>>4,K=M+1<w?(V&15)<<2|W>>6:64,m=M+2<w?W&63:64;y+=k[z]+k[Q]+k[K]+k[m]}return y},u=function(){const s=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,C=new Int32Array(256);for(let W=0;W<256;W++){let z=W;for(let Q=0;Q<8;Q++)z&1?z=3988292384^z>>1&2147483647:z=z>>1&2147483647;C[W]=z}function k(W,z,Q){let K=-1;for(let m=z;m<Q;m++){const i=(K^W[m])&255,n=C[i];K=K>>>8^n}return K^-1}function y(W,z,Q,K){let m=K;const i=z.length;Q[m]=i>>24&255,Q[m+1]=i>>16&255,Q[m+2]=i>>8&255,Q[m+3]=i&255,m+=4,Q[m]=W.charCodeAt(0)&255,Q[m+1]=W.charCodeAt(1)&255,Q[m+2]=W.charCodeAt(2)&255,Q[m+3]=W.charCodeAt(3)&255,m+=4,Q.set(z,m),m+=z.length;const n=k(Q,K+4,m);Q[m]=n>>24&255,Q[m+1]=n>>16&255,Q[m+2]=n>>8&255,Q[m+3]=n&255}function M(W,z,Q){let K=1,m=0;for(let i=z;i<Q;++i)K=(K+(W[i]&255))%65521,m=(m+K)%65521;return m<<16|K}function w(W){if(!H.isNodeJS)return D(W);try{let z;parseInt(process.versions.node)>=8?z=W:z=Buffer.from(W);const Q=require$$5.deflateSync(z,{level:9});return Q instanceof Uint8Array?Q:new Uint8Array(Q)}catch(z){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+z)}return D(W)}function D(W){let z=W.length;const Q=65535,K=Math.ceil(z/Q),m=new Uint8Array(2+z+K*5+4);let i=0;m[i++]=120,m[i++]=156;let n=0;for(;z>Q;)m[i++]=0,m[i++]=255,m[i++]=255,m[i++]=0,m[i++]=0,m.set(W.subarray(n,n+Q),i),i+=Q,n+=Q,z-=Q;m[i++]=1,m[i++]=z&255,m[i++]=z>>8&255,m[i++]=~z&65535&255,m[i++]=(~z&65535)>>8&255,m.set(W.subarray(n),i),i+=W.length-n;const h=M(W,0,W.length);return m[i++]=h>>24&255,m[i++]=h>>16&255,m[i++]=h>>8&255,m[i++]=h&255,m}function V(W,z,Q,K){const m=W.width,i=W.height;let n,h,b;const S=W.data;switch(z){case o.ImageKind.GRAYSCALE_1BPP:h=0,n=1,b=m+7>>3;break;case o.ImageKind.RGB_24BPP:h=2,n=8,b=m*3;break;case o.ImageKind.RGBA_32BPP:h=6,n=8,b=m*4;break;default:throw new Error("invalid format")}const v=new Uint8Array((1+b)*i);let t=0,d=0;for(let N=0;N<i;++N)v[t++]=0,v.set(S.subarray(d,d+b),t),d+=b,t+=b;if(z===o.ImageKind.GRAYSCALE_1BPP&&K){t=0;for(let N=0;N<i;N++){t++;for(let q=0;q<b;q++)v[t++]^=255}}const g=new Uint8Array([m>>24&255,m>>16&255,m>>8&255,m&255,i>>24&255,i>>16&255,i>>8&255,i&255,n,h,0,0,0]),_=w(v),c=s.length+a*3+g.length+_.length,F=new Uint8Array(c);let O=0;return F.set(s,O),O+=s.length,y("IHDR",g,F,O),O+=a+g.length,y("IDATA",_,F,O),O+=a+_.length,y("IEND",new Uint8Array(0),F,O),f(F,"image/png",Q)}return function(z,Q,K){const m=z.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:z.kind;return V(z,m,Q,K)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=U.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=U.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,C){this.x=a,this.y=C}}let L=0,R=0,x=0;A.SVGGraphics=$=class{constructor(s,a,C=!1){this.svgFactory=new Z.DOMSVGFactory,this.current=new E,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!C,this._operatorIdMapping=[];for(const k in o.OPS)this._operatorIdMapping[o.OPS[k]]=k}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const a=s.fnArray,C=s.argsArray;for(let k=0,y=a.length;k<y;k++)if(a[k]===o.OPS.dependency)for(const M of C[k]){const w=M.startsWith("g_")?this.commonObjs:this.objs,D=new Promise(V=>{w.get(M,V)});this.current.dependencies.push(D)}return Promise.all(this.current.dependencies)}transform(s,a,C,k,y,M){const w=[s,a,C,k,y,M];this.transformMatrix=o.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(s,a){this.viewport=a;const C=this._initialize(a);return this.loadDependencies(s).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),C))}convertOpList(s){const a=this._operatorIdMapping,C=s.argsArray,k=s.fnArray,y=[];for(let M=0,w=k.length;M<w;M++){const D=k[M];y.push({fnId:D,fn:a[D],args:C[M]})}return T(y)}executeOpTree(s){for(const a of s){const C=a.fn,k=a.fnId,y=a.args;switch(k|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(y);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(y[0],y[1]);break;case o.OPS.setFont:this.setFont(y);break;case o.OPS.showText:this.showText(y[0]);break;case o.OPS.showSpacedText:this.showText(y[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(y[0],y[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(y[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(y[0]);break;case o.OPS.setHScale:this.setHScale(y[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]);break;case o.OPS.setTextRise:this.setTextRise(y[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(y[0]);break;case o.OPS.setLineWidth:this.setLineWidth(y[0]);break;case o.OPS.setLineJoin:this.setLineJoin(y[0]);break;case o.OPS.setLineCap:this.setLineCap(y[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(y[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(y[0],y[1],y[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(y[0],y[1],y[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(y);break;case o.OPS.setFillColorN:this.setFillColorN(y);break;case o.OPS.shadingFill:this.shadingFill(y[0]);break;case o.OPS.setDash:this.setDash(y[0],y[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(y[0]);break;case o.OPS.setFlatness:this.setFlatness(y[0]);break;case o.OPS.setGState:this.setGState(y[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(y[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(y[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(y[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(y[0],y[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(y[0],y[1],y[2],y[3],y[4],y[5]);break;case o.OPS.constructPath:this.constructPath(y[0],y[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,o.warn)(`Unimplemented operator ${C}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,a,C,k,y,M){const w=this.current;w.textMatrix=w.lineMatrix=[s,a,C,k,y,M],w.textMatrixScale=Math.hypot(s,a),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${p(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",p(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.appendChild(w.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=o.IDENTITY_MATRIX,s.lineMatrix=o.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,a){const C=this.current;C.x=C.lineX+=s,C.y=C.lineY+=a,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${p(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",p(-C.y))}showText(s){const a=this.current,C=a.font,k=a.fontSize;if(k===0)return;const y=a.fontSizeScale,M=a.charSpacing,w=a.wordSpacing,D=a.fontDirection,V=a.textHScale*D,W=C.vertical,z=W?1:-1,Q=C.defaultVMetrics,K=k*a.fontMatrix[0];let m=0;for(const h of s){if(h===null){m+=D*w;continue}else if(typeof h=="number"){m+=z*h*k/1e3;continue}const b=(h.isSpace?w:0)+M,S=h.fontChar;let v,t,d=h.width;if(W){let _;const c=h.vmetric||Q;_=h.vmetric?c[1]:d*.5,_=-_*K;const F=c[2]*K;d=c?-c[0]:d,v=_/y,t=(m+F)/y}else v=m/y,t=0;(h.isInFont||C.missingFile)&&(a.xcoords.push(a.x+v),W&&a.ycoords.push(-a.y+t),a.tspan.textContent+=S);let g;W?g=d*K-b*D:g=d*K+b*D,m+=g}a.tspan.setAttributeNS(null,"x",a.xcoords.map(p).join(" ")),W?a.tspan.setAttributeNS(null,"y",a.ycoords.map(p).join(" ")):a.tspan.setAttributeNS(null,"y",p(-a.y)),W?a.y-=m:a.x+=m*V,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${p(a.fontSize)}px`),a.fontStyle!==U.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==U.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const i=a.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(i===o.TextRenderingMode.FILL||i===o.TextRenderingMode.FILL_STROKE?(a.fillColor!==U.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),i===o.TextRenderingMode.STROKE||i===o.TextRenderingMode.FILL_STROKE){const h=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,h)}let n=a.textMatrix;a.textRise!==0&&(n=n.slice(),n[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${j(n)} scale(${p(V)}, -1)`),a.txtElement.setAttributeNS(P,"xml:space","preserve"),a.txtElement.appendChild(a.tspan),a.txtgrp.appendChild(a.txtElement),this._ensureTransformGroup().appendChild(a.txtElement)}setLeadingMoveText(s,a){this.setLeading(-a),this.moveText(s,a)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const a=f(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${a}); }
`}setFont(s){const a=this.current,C=this.commonObjs.get(s[0]);let k=s[1];a.font=C,this.embedFonts&&!C.missingFile&&!this.embeddedFonts[C.loadedName]&&(this.addFontStyle(C),this.embeddedFonts[C.loadedName]=C),a.fontMatrix=C.fontMatrix||o.FONT_IDENTITY_MATRIX;let y="normal";C.black?y="900":C.bold&&(y="bold");const M=C.italic?"italic":"normal";k<0?(k=-k,a.fontDirection=-1):a.fontDirection=1,a.fontSize=k,a.fontFamily=C.loadedName,a.fontWeight=y,a.fontStyle=M,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",p(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;const s=this.current;s.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=s.txtElement)==null?void 0:a.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=l[s]}setLineJoin(s){this.current.lineJoin=r[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,a,C){this.current.strokeColor=o.Util.makeHexColor(s,a,C)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,a,C){this.current.fillColor=o.Util.makeHexColor(s,a,C),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const a=this.viewport.width,C=this.viewport.height,k=o.Util.inverseTransform(this.transformMatrix),y=o.Util.applyTransform([0,0],k),M=o.Util.applyTransform([0,C],k),w=o.Util.applyTransform([a,0],k),D=o.Util.applyTransform([a,C],k),V=Math.min(y[0],M[0],w[0],D[0]),W=Math.min(y[1],M[1],w[1],D[1]),z=Math.max(y[0],M[0],w[0],D[0]),Q=Math.max(y[1],M[1],w[1],D[1]),K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x",V),K.setAttributeNS(null,"y",W),K.setAttributeNS(null,"width",z-V),K.setAttributeNS(null,"height",Q-W),K.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&K.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(K)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const a=s[1],C=s[2],k=s[3]||o.IDENTITY_MATRIX,[y,M,w,D]=s[4],V=s[5],W=s[6],z=s[7],Q=`shading${x++}`,[K,m,i,n]=o.Util.normalizeRect([...o.Util.applyTransform([y,M],k),...o.Util.applyTransform([w,D],k)]),[h,b]=o.Util.singularValueDecompose2dScale(k),S=V*h,v=W*b,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",Q),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",S),t.setAttributeNS(null,"height",v),t.setAttributeNS(null,"x",`${K}`),t.setAttributeNS(null,"y",`${m}`);const d=this.svg,g=this.transformMatrix,_=this.current.fillColor,c=this.current.strokeColor,F=this.svgFactory.create(i-K,n-m);if(this.svg=F,this.transformMatrix=k,z===2){const O=o.Util.makeHexColor(...a);this.current.fillColor=O,this.current.strokeColor=O}return this.executeOpTree(this.convertOpList(C)),this.svg=d,this.transformMatrix=g,this.current.fillColor=_,this.current.strokeColor=c,t.appendChild(F.childNodes[0]),this.defs.appendChild(t),`url(#${Q})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const a=`shading${x++}`,C=s[3];let k;switch(s[1]){case"axial":const y=s[4],M=s[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",y[0]),k.setAttributeNS(null,"y1",y[1]),k.setAttributeNS(null,"x2",M[0]),k.setAttributeNS(null,"y2",M[1]);break;case"radial":const w=s[4],D=s[5],V=s[6],W=s[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",D[0]),k.setAttributeNS(null,"cy",D[1]),k.setAttributeNS(null,"r",W),k.setAttributeNS(null,"fx",w[0]),k.setAttributeNS(null,"fy",w[1]),k.setAttributeNS(null,"fr",V);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const y of C){const M=this.svgFactory.createElement("svg:stop");M.setAttributeNS(null,"offset",y[0]),M.setAttributeNS(null,"stop-color",y[1]),k.appendChild(M)}return this.defs.appendChild(k),`url(#${a})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,a){this.current.dashArray=s,this.current.dashPhase=a}constructPath(s,a){const C=this.current;let k=C.x,y=C.y,M=[],w=0;for(const D of s)switch(D|0){case o.OPS.rectangle:k=a[w++],y=a[w++];const V=a[w++],W=a[w++],z=k+V,Q=y+W;M.push("M",p(k),p(y),"L",p(z),p(y),"L",p(z),p(Q),"L",p(k),p(Q),"Z");break;case o.OPS.moveTo:k=a[w++],y=a[w++],M.push("M",p(k),p(y));break;case o.OPS.lineTo:k=a[w++],y=a[w++],M.push("L",p(k),p(y));break;case o.OPS.curveTo:k=a[w+4],y=a[w+5],M.push("C",p(a[w]),p(a[w+1]),p(a[w+2]),p(a[w+3]),p(k),p(y)),w+=6;break;case o.OPS.curveTo2:M.push("C",p(k),p(y),p(a[w]),p(a[w+1]),p(a[w+2]),p(a[w+3])),k=a[w+2],y=a[w+3],w+=4;break;case o.OPS.curveTo3:k=a[w+2],y=a[w+3],M.push("C",p(a[w]),p(a[w+1]),p(k),p(y),p(k),p(y)),w+=4;break;case o.OPS.closePath:M.push("Z");break}M=M.join(" "),C.path&&s.length>0&&s[0]!==o.OPS.rectangle&&s[0]!==o.OPS.moveTo?M=C.path.getAttributeNS(null,"d")+M:(C.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(C.path)),C.path.setAttributeNS(null,"d",M),C.path.setAttributeNS(null,"fill","none"),C.element=C.path,C.setCurrentPoint(k,y)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const a=`clippath${L++}`,C=this.svgFactory.createElement("svg:clipPath");C.setAttributeNS(null,"id",a),C.setAttributeNS(null,"transform",j(this.transformMatrix));const k=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,C.appendChild(k),this.defs.appendChild(C),s.activeClipUrl){s.clipGroup=null;for(const y of this.extraStack)y.clipGroup=null;C.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const a=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",a)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[a,C]of s)switch(a){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C);break;case"CA":this.setStrokeAlpha(C);break;case"ca":this.setFillAlpha(C);break;default:(0,o.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,a=1){const C=this.current;let k=C.dashArray;a!==1&&k.length>0&&(k=k.map(function(y){return a*y})),s.setAttributeNS(null,"stroke",C.strokeColor),s.setAttributeNS(null,"stroke-opacity",C.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",p(C.miterLimit)),s.setAttributeNS(null,"stroke-linecap",C.lineCap),s.setAttributeNS(null,"stroke-linejoin",C.lineJoin),s.setAttributeNS(null,"stroke-width",p(a*C.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",k.map(p).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",p(a*C.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(s)}paintImageXObject(s){const a=s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s);if(!a){(0,o.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(s,a){const C=s.width,k=s.height,y=u(s,this.forceDataSchema,!!a),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",p(C)),M.setAttributeNS(null,"height",p(k)),this.current.element=M,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(e,"xlink:href",y),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",p(-k)),w.setAttributeNS(null,"width",p(C)+"px"),w.setAttributeNS(null,"height",p(k)+"px"),w.setAttributeNS(null,"transform",`scale(${p(1/C)} ${p(-1/k)})`),a?a.appendChild(w):this._ensureTransformGroup().appendChild(w)}paintImageMaskXObject(s){const a=this.current,C=s.width,k=s.height,y=a.fillColor;a.maskId=`mask${R++}`;const M=this.svgFactory.createElement("svg:mask");M.setAttributeNS(null,"id",a.maskId);const w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",p(C)),w.setAttributeNS(null,"height",p(k)),w.setAttributeNS(null,"fill",y),w.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.appendChild(M),this._ensureTransformGroup().appendChild(w),this.paintInlineImageXObject(s,M)}paintFormXObjectBegin(s,a){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),a){const C=a[2]-a[0],k=a[3]-a[1],y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x",a[0]),y.setAttributeNS(null,"y",a[1]),y.setAttributeNS(null,"width",p(C)),y.setAttributeNS(null,"height",p(k)),this.current.element=y,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const a=this.svgFactory.create(s.width,s.height),C=this.svgFactory.createElement("svg:defs");a.appendChild(C),this.defs=C;const k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",j(s.transform)),a.appendChild(k),this.svg=k,a}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",j(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFNodeStream=void 0;var o=G(1),Z=G(24);const H=require$$5,$=require$$5,U=require$$5,P=require$$5,e=/^file:\/\/\/[a-zA-Z]:\//;function l(R){const x=P.parse(R);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(R)?P.parse(`file:///${R}`):(x.host||(x.protocol="file:"),x)}class r{constructor(x){this.source=x,this.url=l(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x,s;return(s=(x=this._fullRequestReader)==null?void 0:x._loaded)!=null?s:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new j(this):new T(this),this._fullRequestReader}getRangeReader(x,s){if(s<=this._progressiveDataLength)return null;const a=this.isFsUrl?new L(this,x,s):new p(this,x,s);return this._rangeRequestReaders.push(a),a}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);for(const s of this._rangeRequestReaders.slice(0))s.cancel(x)}}A.PDFNodeStream=r;class f{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=x.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();const s=x.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function E(R,x){return{protocol:R.protocol,auth:R.auth,host:R.hostname,port:R.port,path:R.path,method:"GET",headers:x}}class T extends f{constructor(x){super(x);const s=a=>{if(a.statusCode===404){const M=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=M,this._headersCapability.reject(M);return}this._headersCapability.resolve(),this._setReadableStream(a);const C=M=>this._readableStream.headers[M.toLowerCase()],{allowRangeRequests:k,suggestedLength:y}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=y||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(C)};this._request=null,this._url.protocol==="http:"?this._request=$.request(E(this._url,x.httpHeaders),s):this._request=U.request(E(this._url,x.httpHeaders),s),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class p extends u{constructor(x,s,a){super(x),this._httpHeaders={};for(const k in x.httpHeaders){const y=x.httpHeaders[k];typeof y>"u"||(this._httpHeaders[k]=y)}this._httpHeaders.Range=`bytes=${s}-${a-1}`;const C=k=>{if(k.statusCode===404){const y=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=y;return}this._setReadableStream(k)};this._request=null,this._url.protocol==="http:"?this._request=$.request(E(this._url,this._httpHeaders),C):this._request=U.request(E(this._url,this._httpHeaders),C),this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class j extends f{constructor(x){super(x);let s=decodeURIComponent(this._url.path);e.test(this._url.href)&&(s=s.replace(/^\//,"")),H.lstat(s,(a,C)=>{if(a){a.code==="ENOENT"&&(a=new o.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=C.size,this._setReadableStream(H.createReadStream(s)),this._headersCapability.resolve()})}}class L extends u{constructor(x,s,a){super(x);let C=decodeURIComponent(this._url.path);e.test(this._url.href)&&(C=C.replace(/^\//,"")),this._setReadableStream(H.createReadStream(C,{start:s,end:a-1}))}}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.createResponseStatusError=P,A.extractFilenameFromHeader=U,A.validateRangeRequestCapabilities=$,A.validateResponseStatus=e;var o=G(1),Z=G(25),H=G(5);function $({getResponseHeader:l,isHttp:r,rangeChunkSize:f,disableRange:u}){(0,o.assert)(f>0,"Range chunk size must be larger than zero");const E={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(l("Content-Length"),10);return!Number.isInteger(T)||(E.suggestedLength=T,T<=2*f)||u||!r||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function U(l){const r=l("Content-Disposition");if(r){let f=(0,Z.getFilenameFromContentDispositionHeader)(r);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,H.isPdfFile)(f))return f}return null}function P(l,r){return l===404||l===0&&r.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+r+'".'):new o.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${r}".`,l)}function e(l){return l===200||l===206}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.getFilenameFromContentDispositionHeader=Z;var o=G(1);function Z(H){let $=!0,U=P("filename\\*","i").exec(H);if(U){U=U[1];let T=f(U);return T=unescape(T),T=u(T),T=E(T),l(T)}if(U=r(H),U){const T=E(U);return l(T)}if(U=P("filename","i").exec(H),U){U=U[1];let T=f(U);return T=E(T),l(T)}function P(T,p){return new RegExp("(?:^|;)\\s*"+T+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function e(T,p){if(T){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const j=new TextDecoder(T,{fatal:!0}),L=(0,o.stringToBytes)(p);p=j.decode(L),$=!1}catch{}}return p}function l(T){return $&&/[\x80-\xff]/.test(T)&&(T=e("utf-8",T),$&&(T=e("iso-8859-1",T))),T}function r(T){const p=[];let j;const L=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(j=L.exec(T))!==null;){let[,x,s,a]=j;if(x=parseInt(x,10),x in p){if(x===0)break;continue}p[x]=[s,a]}const R=[];for(let x=0;x<p.length&&x in p;++x){let[s,a]=p[x];a=f(a),s&&(a=unescape(a),x===0&&(a=u(a))),R.push(a)}return R.join("")}function f(T){if(T.startsWith('"')){const p=T.slice(1).split('\\"');for(let j=0;j<p.length;++j){const L=p[j].indexOf('"');L!==-1&&(p[j]=p[j].slice(0,L),p.length=j+1),p[j]=p[j].replace(/\\(.)/g,"$1")}T=p.join('"')}return T}function u(T){const p=T.indexOf("'");if(p===-1)return T;const j=T.slice(0,p),R=T.slice(p+1).replace(/^[^']*'/,"");return e(j,R)}function E(T){return!T.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(T)?T:T.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,j,L,R){if(L==="q"||L==="Q")return R=R.replace(/_/g," "),R=R.replace(/=([0-9a-fA-F]{2})/g,function(x,s){return String.fromCharCode(parseInt(s,16))}),e(j,R);try{R=atob(R)}catch{}return e(j,R)})}return""}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFNetworkStream=void 0;var o=G(1),Z=G(24);const H=200,$=206;function U(f){const u=f.response;return typeof u!="string"?u:(0,o.stringToBytes)(u).buffer}class P{constructor(u,E={}){this.url=u,this.isHttp=/^https?:/i.test(u),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.getXhr=E.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(u,E,T){const p={begin:u,end:E};for(const j in T)p[j]=T[j];return this.request(p)}requestFull(u){return this.request(u)}request(u){const E=this.getXhr(),T=this.currXhrId++,p=this.pendingRequests[T]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const j in this.httpHeaders){const L=this.httpHeaders[j];typeof L>"u"||E.setRequestHeader(j,L)}return this.isHttp&&"begin"in u&&"end"in u?(E.setRequestHeader("Range",`bytes=${u.begin}-${u.end-1}`),p.expectedStatus=$):p.expectedStatus=H,E.responseType="arraybuffer",u.onError&&(E.onerror=function(j){u.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,T),E.onprogress=this.onProgress.bind(this,T),p.onHeadersReceived=u.onHeadersReceived,p.onDone=u.onDone,p.onError=u.onError,p.onProgress=u.onProgress,E.send(null),T}onProgress(u,E){var p;const T=this.pendingRequests[u];!T||(p=T.onProgress)==null||p.call(T,E)}onStateChange(u,E){var x,s,a;const T=this.pendingRequests[u];if(!T)return;const p=T.xhr;if(p.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),p.readyState!==4||!(u in this.pendingRequests))return;if(delete this.pendingRequests[u],p.status===0&&this.isHttp){(x=T.onError)==null||x.call(T,p.status);return}const j=p.status||H;if(!(j===H&&T.expectedStatus===$)&&j!==T.expectedStatus){(s=T.onError)==null||s.call(T,p.status);return}const R=U(p);if(j===$){const C=p.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);T.onDone({begin:parseInt(k[1],10),chunk:R})}else R?T.onDone({begin:0,chunk:R}):(a=T.onError)==null||a.call(T,p.status)}getRequestXhr(u){return this.pendingRequests[u].xhr}isPendingRequest(u){return u in this.pendingRequests}abortRequest(u){const E=this.pendingRequests[u].xhr;delete this.pendingRequests[u],E.abort()}}class e{constructor(u){this._source=u,this._manager=new P(u.url,{httpHeaders:u.httpHeaders,withCredentials:u.withCredentials}),this._rangeChunkSize=u.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(u){const E=this._rangeRequestReaders.indexOf(u);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(u,E){const T=new r(this._manager,u,E);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(u){var E;(E=this._fullRequestReader)==null||E.cancel(u);for(const T of this._rangeRequestReaders.slice(0))T.cancel(u)}}A.PDFNetworkStream=e;class l{constructor(u,E){this._manager=u;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=u.requestFull(T),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const u=this._fullRequestId,E=this._manager.getRequestXhr(u),T=L=>E.getResponseHeader(L),{allowRangeRequests:p,suggestedLength:j}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=j||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(u),this._headersReceivedCapability.resolve()}_onDone(u){if(u&&(this._requests.length>0?this._requests.shift().resolve({value:u.chunk,done:!1}):this._cachedChunks.push(u.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(u){this._storedError=(0,Z.createResponseStatusError)(u,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(u){var E;(E=this.onProgress)==null||E.call(this,{loaded:u.loaded,total:u.lengthComputable?u.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,o.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._headersReceivedCapability.reject(u);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(u,E,T){this._manager=u;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._requestId=u.requestRange(E,T,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var u;(u=this.onClosed)==null||u.call(this,this)}_onDone(u){const E=u.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(u){this._storedError=(0,Z.createResponseStatusError)(u,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(u){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:u.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,o.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(et,A,G)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFFetchStream=void 0;var o=G(1),Z=G(24);function H(l,r,f){return{method:"GET",headers:l,signal:f==null?void 0:f.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function $(l){const r=new Headers;for(const f in l){const u=l[f];typeof u>"u"||r.append(f,u)}return r}class U{constructor(r){this.source=r,this.isHttp=/^https?:/i.test(r.url),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r,f;return(f=(r=this._fullRequestReader)==null?void 0:r._loaded)!=null?f:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(r,f){if(f<=this._progressiveDataLength)return null;const u=new e(this,r,f);return this._rangeRequestReaders.push(u),u}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const f of this._rangeRequestReaders.slice(0))f.cancel(r)}}A.PDFFetchStream=U;class P{constructor(r){this._stream=r,this._reader=null,this._loaded=0,this._filename=null;const f=r.source;this._withCredentials=f.withCredentials||!1,this._contentLength=f.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._headers=$(this._stream.httpHeaders);const u=f.url;fetch(u,H(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,Z.validateResponseStatus)(E.status))throw(0,Z.createResponseStatusError)(E.status,u);this._reader=E.body.getReader(),this._headersCapability.resolve();const T=L=>E.headers.get(L),{allowRangeRequests:p,suggestedLength:j}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=j||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(T),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:r,done:f}=await this._reader.read();return f?{value:r,done:f}:(this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}class e{constructor(r,f,u){this._stream=r,this._reader=null,this._loaded=0;const E=r.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=$(this._stream.httpHeaders),this._headers.append("Range",`bytes=${f}-${u-1}`);const T=E.url;fetch(T,H(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,Z.validateResponseStatus)(p.status))throw(0,Z.createResponseStatusError)(p.status,T);this._readCapability.resolve(),this._reader=p.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:r,done:f}=await this._reader.read();return f?{value:r,done:f}:(this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){this._reader&&this._reader.cancel(r),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(et){var A=__webpack_module_cache__[et];if(A!==void 0)return A.exports;var G=__webpack_module_cache__[et]={exports:{}};return __webpack_modules__[et](G,G.exports,__w_pdfjs_require__),G.exports}var __webpack_exports__={};return(()=>{var et=__webpack_exports__;Object.defineProperty(et,"__esModule",{value:!0}),Object.defineProperty(et,"AnnotationLayer",{enumerable:!0,get:function(){return Z.AnnotationLayer}}),Object.defineProperty(et,"AnnotationMode",{enumerable:!0,get:function(){return A.AnnotationMode}}),Object.defineProperty(et,"CMapCompressionType",{enumerable:!0,get:function(){return A.CMapCompressionType}}),Object.defineProperty(et,"GlobalWorkerOptions",{enumerable:!0,get:function(){return H.GlobalWorkerOptions}}),Object.defineProperty(et,"InvalidPDFException",{enumerable:!0,get:function(){return A.InvalidPDFException}}),Object.defineProperty(et,"LoopbackPort",{enumerable:!0,get:function(){return G.LoopbackPort}}),Object.defineProperty(et,"MissingPDFException",{enumerable:!0,get:function(){return A.MissingPDFException}}),Object.defineProperty(et,"OPS",{enumerable:!0,get:function(){return A.OPS}}),Object.defineProperty(et,"PDFDataRangeTransport",{enumerable:!0,get:function(){return G.PDFDataRangeTransport}}),Object.defineProperty(et,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(et,"PDFWorker",{enumerable:!0,get:function(){return G.PDFWorker}}),Object.defineProperty(et,"PasswordResponses",{enumerable:!0,get:function(){return A.PasswordResponses}}),Object.defineProperty(et,"PermissionFlag",{enumerable:!0,get:function(){return A.PermissionFlag}}),Object.defineProperty(et,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(et,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(et,"SVGGraphics",{enumerable:!0,get:function(){return P.SVGGraphics}}),Object.defineProperty(et,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return A.UNSUPPORTED_FEATURES}}),Object.defineProperty(et,"UnexpectedResponseException",{enumerable:!0,get:function(){return A.UnexpectedResponseException}}),Object.defineProperty(et,"Util",{enumerable:!0,get:function(){return A.Util}}),Object.defineProperty(et,"VerbosityLevel",{enumerable:!0,get:function(){return A.VerbosityLevel}}),Object.defineProperty(et,"XfaLayer",{enumerable:!0,get:function(){return e.XfaLayer}}),Object.defineProperty(et,"build",{enumerable:!0,get:function(){return G.build}}),Object.defineProperty(et,"createPromiseCapability",{enumerable:!0,get:function(){return A.createPromiseCapability}}),Object.defineProperty(et,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return A.createValidAbsoluteUrl}}),Object.defineProperty(et,"getDocument",{enumerable:!0,get:function(){return G.getDocument}}),Object.defineProperty(et,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(et,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(et,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(et,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(et,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(et,"renderTextLayer",{enumerable:!0,get:function(){return U.renderTextLayer}}),Object.defineProperty(et,"shadow",{enumerable:!0,get:function(){return A.shadow}}),Object.defineProperty(et,"version",{enumerable:!0,get:function(){return G.version}});var A=__w_pdfjs_require__(1),G=__w_pdfjs_require__(4),o=__w_pdfjs_require__(5),Z=__w_pdfjs_require__(18),H=__w_pdfjs_require__(12),$=__w_pdfjs_require__(3),U=__w_pdfjs_require__(21),P=__w_pdfjs_require__(22),e=__w_pdfjs_require__(20);if($.isNodeJS){const{PDFNodeStream:l}=__w_pdfjs_require__(23);(0,G.setPDFNetworkStreamFactory)(r=>new l(r))}else{const{PDFNetworkStream:l}=__w_pdfjs_require__(26),{PDFFetchStream:r}=__w_pdfjs_require__(27);(0,G.setPDFNetworkStreamFactory)(f=>(0,o.isValidFetchUrl)(f.url)?new r(f):new l(f))}})(),__webpack_exports__})()})})(pdf);const _sfc_main$1=defineComponent({__name:"index",props:{url:{},src:{},workerSrc:{}},emits:["success","loading","error"],setup(et,{emit:A}){const G=et,o=A;function Z(){var l;pdf.exports.GlobalWorkerOptions.workerSrc||(pdf.exports.GlobalWorkerOptions.workerSrc=(l=G.workerSrc)!=null?l:"https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/pdf.js/2.13.216/pdf.worker.js")}const H=ref(null),$={pdfPages:0,pdfWidth:"",pdfDoc:null,pdfScale:2,isRendering:!1,pdfNum:null},U=()=>{const l=G.url||G.src;if(!l)return;Z(),pdf.exports.getDocument({url:l}).promise.then(f=>{$.pdfDoc=f,$.pdfPages=f.numPages,nextTick(()=>{P(1)})}).catch(f=>{console.error("\u52A0\u8F7D PDF \u9519\u8BEF:",f),o("error",f),o("loading",!1)})},P=l=>{$.isRendering?$.pdfNum=l:e(l)},e=l=>{$.isRendering=!0,o("loading",!0),$.pdfDoc.getPage(l).then(r=>{var x;const f=document.createElement("canvas"),u=f.getContext("2d"),E=window.devicePixelRatio||1,T=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1,p=E/T,j=r.getViewport({scale:$.pdfScale});f.width=j.width*p,f.height=j.height*p,f.style.width="100%";const L={transform:[p,0,0,p,0,0],canvasContext:u,viewport:j};(x=H.value)==null||x.appendChild(f),r.render(L).promise.then(()=>{$.isRendering=!1,l+=1,l<=$.pdfPages&&e(l),$.pdfNum!==null&&(P($.pdfNum),$.pdfNum=null),l&&$.pdfPages===l-1&&(o("success"),o("loading",!1))}).catch(s=>{console.error("PDF \u6E32\u67D3\u9519\u8BEF:",s),o("error",s),o("loading",!1)})})};return watch(()=>G.url,U),onMounted(U),(l,r)=>(openBlock(),createElementBlock("div",{ref_key:"pdfCanvas",ref:H},null,512))}}),_hoisted_1={class:"u-main u-h"},_sfc_main=defineComponent({__name:"pdf",setup(et){return(A,G)=>{const o=Card;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(o,{size:"small",title:"PDF Preview","body-style":{padding:0,marginTop:"-1px"}},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{src:"https://501351981.github.io/vue-office/examples/dist/static/test-files/test.pdf",style:{width:"210mm"}})]),_:1})])}}});export{_sfc_main as default};
