import{E as B,s as x}from"./shaonq-vue.7644992f.js";import{j as C,a8 as A}from"./arco.d8569e76.js";function N(s,t){const e=C(s!=null?s:{});return[e,u=>{var r;e.value={...s,...u!=null?u:{}},(r=t==null?void 0:t.value)!=null&&r.resetFields&&t.value.resetFields()}]}function $(s,t,e="warning"){const n=t!=null?t:{okButtonProps:{status:"danger"},okText:"\u5220\u9664"};A[e]({title:"\u5220\u9664\u63D0\u793A",simple:!1,width:360,titleAlign:"start",content:"\u786E\u5B9A\u5220\u9664\u6B64\u6570\u636E\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002",hideCancel:!1,...n,async onOk(u){typeof n.onOk=="function"&&n.onOk(u),s&&s()}})}function F(s,t=5){const e=new Array(s.length);let n=0,u=0;return new Promise(r=>{function c(){for(;u<t&&n<s.length;){const d=n,l=s[d];n+=1,typeof l=="function"&&(u+=1,setTimeout(()=>{Promise.resolve().then(()=>l()).then(f=>{e[d]=f}).catch(f=>{console.error(`Task ${d} failed:`,f),e[d]=null}).finally(()=>{u-=1,c(),n>=s.length&&u===0&&r(e)})},0))}}c()})}async function v(s,t,e,n){var h;if(!t)throw new Error("downLoadPdf not element");const u=`${s||"\u65B0\u5EFA PDF\u6587\u6863"}.pdf`;let r=e!=null&&e.className?Array.from(t.querySelectorAll(e.className)):[t];r.length||(r=[t]);const c=new B({unit:"mm",format:"a4",orientation:"portrait",putOnlyUsedFonts:!0,compress:!0,floatPrecision:"smart",...n}),d=r.map(a=>()=>{var i;return x.toCanvas(a,{scale:(i=e==null?void 0:e.scale)!=null?i:1.3})}),l=(await F(d)).filter(a=>!!a);if(l.some(a=>a===null))throw new Error("\u751F\u6210\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u6709\u4E0D\u53EF\u8BBF\u95EE\u7684\u7F51\u7EDC\u8D44\u6E90");console.log(`Create a ${l.length}-page file named ${u}`);let f=0;function w(){f+=1,typeof(e==null?void 0:e.progress)=="function"&&e.progress(f,l.length)}const E=(h=e==null?void 0:e.paddingBuffer)!=null?h:5,y=l.map((a,i)=>async()=>{i>0&&c.addPage();const P=a.width/210,o=a.height/P;if(o<=297)c.addImage(a,"PNG",0,0,210,o);else{let g=o,m=0;for(;g>0;)g>E&&c.addImage(a,"PNG",0,m,210,o),g-=297,m-=297,g>0&&c.addPage()}w()});await F(y),c.save(u)}export{v as d,$ as o,N as u};
